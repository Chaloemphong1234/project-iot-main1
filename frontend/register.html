<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>à¸ªà¸¡à¸±à¸„à¸£à¹€à¸£à¸µà¸¢à¸™ - à¸§à¸´à¸—à¸¢à¸²à¸¥à¸±à¸¢à¹€à¸—à¸„à¸™à¸´à¸„à¸Šà¸±à¸¢à¸ à¸¹à¸¡à¸´</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Sarabun:wght@400;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
  
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body { font-family: "Sarabun", sans-serif; background: linear-gradient(135deg, #0a192f, #003366); color: #f0f0f0; }
    header { display: flex; justify-content: space-between; align-items: center; background-color: rgba(10, 25, 47, 0.8); padding: 10px 5%; position: fixed; top: 0; width: 100%; z-index: 1000; backdrop-filter: blur(12px); border-bottom: 1px solid rgba(255, 255, 255, 0.1); }
    .logo-container { display: flex; align-items: center; gap: 20px; }
    .logo-container img { height: 60px; }
    .logo-text h2 { font-size: 1.5rem; font-weight: 700; color: #fff; }
    .logo-text h3 { font-size: 1rem; color: #00c6ff; font-weight: 400; }
    
    nav {
      display: flex;
      align-items: center;
    }

    nav > * {
      margin-left: 35px;
    }
    nav > *:first-child {
      margin-left: 0;
    }

    .nav-link {
      color: rgb(255, 255, 255);
      text-decoration: none;
      font-size: 1.1rem;
      transition: color 0.3s;
      position: relative;
      padding: 10px 0;
      display: inline-block;
      cursor: pointer;
      background: none;
      border: none;
      font-family: inherit;
    }

    .nav-link::after {
      content: '';
      position: absolute;
      bottom: 0;
      left: 50%;
      transform: translateX(-50%);
      width: 0;
      height: 2px;
      background-color: #00c6ff;
      transition: width 0.3s ease;
    }

    .nav-link:hover,
    .dropdown:hover .dropbtn {
      color: #00c6ff;
      text-shadow: none;
    }

    .nav-link:hover::after,
    .dropdown:hover .dropbtn::after {
      width: 100%;
    }

    .nav-button {
      display: inline-block;
      text-decoration: none;
      background-color: #00c6ff;
      color: #0a192f;
      padding: 10px 25px;
      border-radius: 20px;
      font-weight: 700;
      transition: all 0.3s ease;
      box-shadow: 0 4px 15px rgba(0, 198, 255, 0.3);
      font-size: 1.1rem;
    }

    .nav-button:hover {
      background-color: #fff;
      color: #0078ff;
      transform: translateY(-3px);
      box-shadow: 0 8px 20px rgba(255, 255, 255, 0.3);
      text-shadow: none;
    }

    nav > .dropdown {
      position: relative;
      display: inline-block;
    }

    .dropdown .dropbtn .fa-caret-down {
      margin-left: 4px;
      font-size: 0.8em;
      transition: transform 0.3s ease;
    }

    .dropdown:hover .dropbtn .fa-caret-down {
      transform: rotate(180deg);
    }

    .dropdown-content {
      display: none;
      position: absolute;
      background-color: rgba(10, 25, 47, 0.95);
      backdrop-filter: blur(12px);
      min-width: 220px;
      box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.5);
      z-index: 1001;
      border-radius: 0 0 8px 8px;
      border: 1px solid rgba(255, 255, 255, 0.1);
      border-top: none;
      top: 100%;
      left: 0;
      overflow: hidden;
      animation: fadeIn 0.3s ease;
    }

    .dropdown-content a {
      color: #f0f0f0;
      padding: 12px 20px;
      text-decoration: none;
      display: block;
      text-align: left;
      margin-left: 0;
      font-size: 1rem;
      transition: background-color 0.3s, color 0.3s, transform 0.3s;
    }

    .dropdown-content a:hover {
      background-color: rgba(0, 198, 255, 0.15);
      color: #00c6ff;
      text-shadow: none;
      transform: translateX(5px);
    }

    .dropdown:hover .dropdown-content {
      display: block;
    }


    .form-section { padding: 140px 20px 80px; max-width: 800px; margin: auto; }
    .form-section h2 { text-align: center; font-size: 2.3rem; color: #fff; margin-bottom: 40px; position: relative; }
    .form-section h2::after { content: ""; display: block; width: 60px; height: 4px; background-color: #00c6ff; margin: 10px auto 0; border-radius: 2px; }

    form { background: rgba(255, 255, 255, 0.05); padding: 40px; border-radius: 20px; border: 1px solid rgba(255,255,255,0.1); backdrop-filter: blur(6px); box-shadow: 0 5px 25px rgba(0,0,0,0.3); }
    label { display: block; margin-bottom: 8px; font-weight: 600; color: #00c6ff; }
    input, select, textarea { width: 100%; padding: 12px; margin-bottom: 20px; border-radius: 8px; border: 1px solid transparent; font-size: 1rem; outline: none; background: rgba(255,255,255,0.1); color: #fff; transition: all 0.3s ease; }
    input:focus, select:focus, textarea:focus { background: rgba(255,255,255,0.15); border-color: #00c6ff; box-shadow: 0 0 15px rgba(0, 198, 255, 0.3); }
    input::placeholder, textarea::placeholder { color: #ccc; }

    input.error, textarea.error, .radio-group-container.error { border-color: #ff4d4d; box-shadow: 0 0 15px rgba(255, 77, 77, 0.5); }

    .radio-group-container { display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 15px; margin-bottom: 20px; border: 1px solid transparent; border-radius: 8px; padding: 10px; transition: all 0.3s ease; }
    .radio-label { background: rgba(255, 255, 255, 0.1); border: 1px solid rgba(255, 255, 255, 0.1); padding: 12px 15px; border-radius: 8px; cursor: pointer; transition: all 0.3s ease; display: flex; align-items: center; gap: 12px; color: #f0f0f0; }
    .radio-label:hover { background: rgba(255, 255, 255, 0.2); transform: translateY(-3px); box-shadow: 0 4px 10px rgba(0,0,0,0.2); }
    .radio-label input[type="radio"] { display: none; }
    .radio-custom { width: 20px; height: 20px; border: 2px solid #00c6ff; border-radius: 50%; display: inline-block; transition: all 0.3s ease; position: relative; flex-shrink: 0; }
    .radio-label input[type="radio"]:checked + .radio-custom { background-color: #00c6ff; border-color: #00c6ff; }
    .radio-label input[type="radio"]:checked + .radio-custom::after { content: ""; position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); width: 8px; height: 8px; background: #0a192f; border-radius: 50%; }

    button { display: block; width: 50%; background-color: #00c6ff; border: none; color: #0a192f; padding: 15px; border-radius: 30px; font-size: 1.2rem; font-weight: 700; cursor: pointer; transition: all 0.3s ease; box-shadow: 0 0 20px rgba(0, 198, 255, 0.4); }
    button:hover { background-color: #fff; color: #003366; transform: scale(1.03); box-shadow: 0 0 30px rgba(0, 198, 255, 0.7); }

    footer { text-align: center; background: #061223; padding: 40px 20px; font-size: 0.95rem; color: #aaa; margin-top: 60px; }

    .chatbot-btn {
      position: fixed;
      bottom: 45px;
      right: 30px;
      width: 60px;
      height: 60px;
      border-radius: 50%;
      background-color: #00c6ff;
      display: flex;
      justify-content: center;
      align-items: center;
      color: #0a192f;
      font-size: 1.8rem;
      box-shadow: 0 4px 15px rgba(0,0,0,0.3);
      cursor: pointer;
      z-index: 999;
      transition: transform 0.3s;
    }
    .chatbot-btn:hover {
      transform: scale(1.1);
      background-color: #fff;
    }

    /* ===== CHATBOX ===== */
    .chatbox {
      position: fixed;
      bottom: 120px;
      right: 30px;
      width: 350px;
      max-height: 500px;
      background-color: rgba(10, 25, 47, 0.95);
      border-radius: 15px;
      box-shadow: 0 4px 20px rgba(0,0,0,0.4);
      overflow: hidden;
      display: none;
      flex-direction: column;
      z-index: 1000;
      backdrop-filter: blur(10px);
    }
    .chatbox-header {
      background-color: #00c6ff;
      color: #0a192f;
      padding: 12px 20px;
      font-weight: 700;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    .chatbox-body {
      padding: 15px;
      overflow-y: auto;
      flex-grow: 1;
      display: flex;
      flex-direction: column;
      gap: 10px;
      min-height: 300px;
    }
    .message {
      padding: 10px 15px;
      border-radius: 15px;
      max-width: 80%;
      word-wrap: break-word;
      line-height: 1.4;
    }
    .user-msg {
      align-self: flex-end;
      background-color: #00c6ff;
      color: #0a192f;
    }
    .bot-msg {
      align-self: flex-start;
      background-color: #1b2b4a;
      color: #fff;
    }
    .chatbox-input {
      display: flex;
      border-top: 1px solid rgba(255,255,255,0.1);
    }
    .chatbox-input input {
      flex-grow: 1;
      padding: 12px 15px;
      border: none;
      background: transparent;
      color: #fff;
      outline: none;
      font-size: 1rem;
      font-family: "Sarabun", sans-serif;
    }
    .chatbox-input button {
      background: none;
      border: none;
      color: #00c6ff;
      font-size: 1.4rem;
      padding: 10px 15px;
      cursor: pointer;
      transition: color 0.3s;
    }
    .chatbox-input button:hover {
      color: #fff;
    }

    /* ===== Footer ===== */
    footer {
      background: #061223;
      text-align: center;
      padding: 40px 20px;
      font-size: 1rem;
      color: #aaa;
    }
    .footer-contact p {
      margin-bottom: 20px;
      line-height: 1.8;
    }

    /* ===== Animations ===== */
    @keyframes fadeInDown { from { opacity: 0; transform: translateY(-50px); } to { opacity: 1; transform: translateY(0); } }
    @keyframes fadeInUp { from { opacity: 0; transform: translateY(50px); } to { opacity: 1; transform: translateY(0); } }
    @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }

    /* ===== Responsive ===== */
    @media (max-width: 992px) {
      .logo-text h2 { font-size: 1.2rem; }
      .logo-text h3 { font-size: 0.9rem; }
    }

    @media (max-width: 768px) {
      html { scroll-padding-top: 170px; }
      header {
        flex-direction: column;
        align-items: center;
        padding: 15px;
      }
      .logo-container {
        width: 100%;
        justify-content: center;
      }
      .logo-text {
        text-align: center;
      }

      nav {
        margin-top: 15px;
        width: 100%;
        justify-content: center;
        align-items: center;
        flex-wrap: wrap;
        gap: 15px;
      }

      .nav-link,
      nav > .dropdown,
      .nav-button {
        margin: 0;
        font-size: 1rem;
      }

      nav > * {
        margin-left: 0;
      }

      .nav-link {
        padding: 5px 0;
      }

      .nav-button {
        padding: 8px 20px;
        font-size: 1rem;
      }

      .nav-link::after {
        display: none;
      }

      .slider-section { padding-top: 155px; }
      .hero h1 { font-size: 2.5rem; }
      .hero p { font-size: 1.1rem; }
      .content-section { padding: 60px 0; }
      .section-title { font-size: 2rem; }
      .course-grid, .news-grid { grid-template-columns: 1fr; }
      .slider-nav button { width: 40px; height: 40px; font-size: 1.5rem; }

      .chatbox {
        width: 90%;
        max-width: 350px;
        bottom: 110px;
        right: 5%;
      }
      .chatbot-btn {
        bottom: 30px;
      }
    }

    @media (max-width: 400px) {
      .chatbox {
        width: 95%;
        right: 2.5%;
        bottom: 100px;
      }
      .chatbot-btn {
        bottom: 20px;
        right: 20px;
      }
    }
    
    
    
   #botControls {
        position: fixed;
        bottom: 30px;
        z-index: 10000;
        left: 50%;
        transform: translateX(-50%);
        user-select: none;
        text-align: center;
    }

    /* 2. à¸›à¸¸à¹ˆà¸¡à¹„à¸¡à¸„à¹Œ ğŸ™ï¸ (à¸•à¸±à¸§à¸›à¸¸à¹ˆà¸¡) */
    #listenButton {
        width: 70px;
        height: 70px;
        border-radius: 50%;
        border: none;
        cursor: pointer;
        
        /* ğŸ¨ à¸”à¸µà¹„à¸‹à¸™à¹Œà¹ƒà¸«à¸¡à¹ˆ: à¸ªà¸µà¸˜à¸µà¸¡ + Glow */
        background-color: #00c6ff;
        color: #0a192f; /* à¸ªà¸µà¹„à¸­à¸„à¸­à¸™à¸‚à¹‰à¸²à¸‡à¹ƒà¸™ */
        font-size: 2rem; /* à¸‚à¸™à¸²à¸”à¹„à¸­à¸„à¸­à¸™ */
        
        display: flex;
        justify-content: center;
        align-items: center;
        
        /* ğŸ¨ à¸­à¸™à¸´à¹€à¸¡à¸Šà¸±à¸™ "à¸«à¸²à¸¢à¹ƒà¸ˆ" (Pulse) */
        box-shadow: 0 0 25px rgba(0, 198, 255, 0.5);
        animation: pulse-breathe 2.5s infinite ease-in-out;
        transition: all 0.3s ease;
    }
    #listenButton:hover {
        transform: scale(1.1);
        box-shadow: 0 0 35px rgba(0, 198, 255, 0.8);
    }
    #listenButton:disabled {
        opacity: 0.5;
        animation: none;
        cursor: not-allowed;
        transform: scale(1.0);
    }

    /* 3. à¸‚à¹‰à¸­à¸„à¸§à¸²à¸¡à¹ƒà¸•à¹‰à¸›à¸¸à¹ˆà¸¡à¹„à¸¡à¸„à¹Œ */
    #statusText {
        color: #f0f0f0; /* ğŸ¨ à¸ªà¸µà¸‚à¸²à¸§ */
        margin-top: 15px;
        font-weight: 600;
        text-shadow: 0 0 10px rgba(0,0,0,0.5);
    }


    /* 4. à¸à¸£à¸­à¸šà¸šà¸­à¸—à¸ªà¸µà¹ˆà¹€à¸«à¸¥à¸µà¹ˆà¸¢à¸¡ (à¸¥à¹ˆà¸²à¸‡à¸‹à¹‰à¸²à¸¢) */
    #botIntro {
        position: fixed;
        bottom: 20px;
        left: 20px;
        width: 300px; 
        
        /* ğŸ¨ à¸”à¸µà¹„à¸‹à¸™à¹Œà¹ƒà¸«à¸¡à¹ˆ: à¸à¸£à¸°à¸ˆà¸à¸à¹‰à¸² (Glassmorphism) */
        background: rgba(10, 25, 47, 0.85); /* à¸ªà¸µà¹€à¸”à¸µà¸¢à¸§à¸à¸±à¸š Header */
        backdrop-filter: blur(10px);
        border: 1px solid rgba(0, 198, 255, 0.3); /* à¸‚à¸­à¸šà¸ªà¸µà¸Ÿà¹‰à¸²à¹€à¸£à¸·à¸­à¸‡à¹† */
        color: #f0f0f0; /* ğŸ¨ à¸ªà¸µà¸‚à¹‰à¸­à¸„à¸§à¸²à¸¡à¸‚à¸²à¸§ */

        padding: 15px;
        padding-top: 35px; /* à¹€à¸à¸´à¹ˆà¸¡à¸—à¸µà¹ˆà¸§à¹ˆà¸²à¸‡à¹ƒà¸«à¹‰à¸›à¸¸à¹ˆà¸¡ X */
        border-radius: 12px;
        box-shadow: 0 8px 30px rgba(0,0,0,0.3);
        
        display: none; /* à¹€à¸£à¸´à¹ˆà¸¡à¸•à¹‰à¸™à¸”à¹‰à¸§à¸¢à¸à¸²à¸£à¸‹à¹ˆà¸­à¸™ */
        opacity: 0;
        transition: opacity 0.35s ease, transform 0.35s ease;
        align-items: center;
        z-index: 10001;
    }

    /* 5. à¸›à¸¸à¹ˆà¸¡à¸«à¸¢à¸¸à¸” (X) */
    #botIntro .stop-button {
        position: absolute;
        top: 8px;
        right: 8px;
        background: rgba(255, 255, 255, 0.1);
        color: #f0f0f0;
        border: none;
        border-radius: 50%;
        width: 24px;
        height: 24px;
        cursor: pointer;
        font-size: 12px;
        line-height: 24px;
        text-align: center;
        font-weight: bold;
    }
    #botIntro .stop-button:hover {
        background: rgba(255, 255, 255, 0.2);
    }

    /* 6. à¸«à¸™à¹‰à¸²à¸šà¸­à¸— (à¸—à¸µà¹ˆà¸„à¸£à¸­à¸šà¸•à¸² + à¸›à¸²à¸) */
    #botFace { 
        margin-right: 12px;
        width: 60px; /* à¸à¸³à¸«à¸™à¸”à¸„à¸§à¸²à¸¡à¸à¸§à¹‰à¸²à¸‡à¸„à¸‡à¸—à¸µà¹ˆ */
    }

    /* 7. ğŸ¨ à¸•à¸²à¸à¸°à¸à¸£à¸´à¸š ğŸ¨ */
    .eye-container {
        display: flex;
        justify-content: space-between;
        width: 44px; /* (14*2) + 16 */
        margin: 0 auto 10px auto; /* 10px à¹€à¸«à¸™à¸·à¸­à¸›à¸²à¸ */
    }
    .eye {
        width: 14px;
        height: 14px;
        background: #f0f0f0;
        border-radius: 50%;
        animation: blink 4s infinite ease-in-out;
    }
    .eye.right-eye {
        animation-delay: 0.2s; /* à¹ƒà¸«à¹‰à¸à¸£à¸°à¸à¸£à¸´à¸šà¹„à¸¡à¹ˆà¸à¸£à¹‰à¸­à¸¡à¸à¸±à¸™ */
    }


    /* 8. ğŸ¨ à¸›à¸²à¸à¹à¸šà¸šà¸„à¸¥à¸·à¹ˆà¸™à¹€à¸ªà¸µà¸¢à¸‡ (Voice Wave) ğŸ¨ */
    #mouth.wave-mouth {
        width: 40px; /* à¸à¸§à¹‰à¸²à¸‡ 40px */
        height: 24px; /* à¸ªà¸¹à¸‡ 24px */
        display: flex;
        justify-content: space-between;
        align-items: flex-end; /* à¹à¸—à¹ˆà¸‡à¹€à¸ªà¸µà¸¢à¸‡à¹€à¸£à¸´à¹ˆà¸¡à¸ˆà¸²à¸à¸”à¹‰à¸²à¸™à¸¥à¹ˆà¸²à¸‡ */
        margin-left: 10px; /* à¸ˆà¸±à¸”à¸à¸¥à¸²à¸‡à¸™à¸´à¸”à¸«à¸™à¹ˆà¸­à¸¢ */
    }
    .wave-bar {
        width: 7px; /* à¸„à¸§à¸²à¸¡à¸à¸§à¹‰à¸²à¸‡à¹à¸—à¹ˆà¸‡ (à¸¥à¸”à¸¥à¸‡à¹€à¸¥à¹‡à¸à¸™à¹‰à¸­à¸¢) */
        border-radius: 4px;
        background-color: #00c6ff; /* ğŸ¨ à¸ªà¸µà¸Ÿà¹‰à¸²à¸˜à¸µà¸¡ */
        transition: height 0.2s ease;
        height: 4px; /* à¸„à¸§à¸²à¸¡à¸ªà¸¹à¸‡à¸›à¸à¸•à¸´ (à¸•à¸­à¸™à¹„à¸¡à¹ˆà¸à¸¹à¸”) */
    }

    /* 8a. ğŸ¨ à¸­à¸™à¸´à¹€à¸¡à¸Šà¸±à¸™à¸›à¸²à¸ (à¸•à¸­à¸™à¸£à¸­à¸Ÿà¸±à¸‡) ğŸ¨ */
    #botIntro.is-listening #mouth .wave-bar {
        animation: listen-wave 1.5s infinite ease-in-out;
    }
    #botIntro.is-listening #mouth .wave-bar:nth-child(1) { animation-delay: 0.1s; }
    #botIntro.is-listening #mouth .wave-bar:nth-child(2) { animation-delay: 0.3s; }
    #botIntro.is-listening #mouth .wave-bar:nth-child(3) { animation-delay: 0.5s; }
    #botIntro.is-listening #mouth .wave-bar:nth-child(4) { animation-delay: 0.2s; }

    /* 8b. ğŸ¨ à¸­à¸™à¸´à¹€à¸¡à¸Šà¸±à¸™à¸›à¸²à¸ (à¸•à¸­à¸™à¸à¸³à¸¥à¸±à¸‡à¸à¸¹à¸”) ğŸ¨ */
    #botIntro.is-talking #mouth .wave-bar {
        animation: talk-wave 1s infinite ease-in-out;
    }
    #botIntro.is-talking #mouth .wave-bar:nth-child(1) { animation-delay: 0.1s; }
    #botIntro.is-talking #mouth .wave-bar:nth-child(2) { animation-delay: 0.3s; }
    #botIntro.is-talking #mouth .wave-bar:nth-child(3) { animation-delay: 0.5s; }
    #botIntro.is-talking #mouth .wave-bar:nth-child(4) { animation-delay: 0.2s; }


    /* 9. à¸‚à¹‰à¸­à¸„à¸§à¸²à¸¡à¸šà¸­à¸— (à¸à¸³à¸¥à¸±à¸‡à¸à¸¹à¸”...) */
    #botText {
        font-family: "Sarabun", sans-serif;
        color: #f0f0f0; /* ğŸ¨ à¸ªà¸µà¸‚à¸²à¸§ */
        font-size: 14px;
        margin: 0;
        flex: 1; /* à¹ƒà¸«à¹‰à¸¢à¸·à¸”à¹€à¸•à¹‡à¸¡à¸à¸·à¹‰à¸™à¸—à¸µà¹ˆà¸—à¸µà¹ˆà¹€à¸«à¸¥à¸·à¸­ */
    }
    /* à¸­à¸™à¸´à¹€à¸¡à¸Šà¸±à¸™ ... (à¸ˆà¸¸à¸”à¹„à¸‚à¹ˆà¸›à¸¥à¸²) */
    #botIntro.is-talking #botText:after,
    #botIntro.is-listening #botText:after {
        content: "...";
        display: inline-block;
        animation: talkingText 1s infinite;
    }


    /* ================================= */
    /* ğŸ¬ KEYFRAMES (v11.4) ğŸ¬ */
    /* ================================= */

    /* 1. à¸­à¸™à¸´à¹€à¸¡à¸Šà¸±à¸™ "à¸«à¸²à¸¢à¹ƒà¸ˆ" (Glow) à¸ªà¸³à¸«à¸£à¸±à¸šà¸›à¸¸à¹ˆà¸¡à¹„à¸¡à¸„à¹Œ */
    @keyframes pulse-breathe {
        0%, 100% {
            transform: scale(1);
            box-shadow: 0 0 25px rgba(0, 198, 255, 0.5);
        }
        50% {
            transform: scale(1.05);
            box-shadow: 0 0 35px rgba(0, 198, 255, 0.8);
        }
    }

    /* 2. ğŸ¨ à¸­à¸™à¸´à¹€à¸¡à¸Šà¸±à¸™ "à¸à¸°à¸à¸£à¸´à¸šà¸•à¸²" ğŸ¨ */
    @keyframes blink {
        0%, 90%, 100% { transform: scaleY(1); }
        95% { transform: scaleY(0.1); }
    }
    
    /* 3. ğŸ¨ à¸­à¸™à¸´à¹€à¸¡à¸Šà¸±à¸™ "à¸„à¸¥à¸·à¹ˆà¸™à¹€à¸ªà¸µà¸¢à¸‡ (à¸£à¸­à¸Ÿà¸±à¸‡)" ğŸ¨ */
    @keyframes listen-wave {
        0%, 100% { height: 4px; }
        50% { height: 12px; }
    }
    
    /* 4. ğŸ¨ à¸­à¸™à¸´à¹€à¸¡à¸Šà¸±à¸™ "à¸„à¸¥à¸·à¹ˆà¸™à¹€à¸ªà¸µà¸¢à¸‡ (à¸à¸¹à¸”)" ğŸ¨ */
    @keyframes talk-wave {
        0%, 100% { height: 6px; }
        25% { height: 12px; }
        50% { height: 24px; }
        75% { height: 18px; }
    }

    /* 5. à¸­à¸™à¸´à¹€à¸¡à¸Šà¸±à¸™ "..." (à¸ˆà¸¸à¸”à¹„à¸‚à¹ˆà¸›à¸¥à¸²) */
    @keyframes talkingText {
        0% { content: '.'; }
        33% { content: '..'; }
        66%, 100% { content: '...'; }
    }
  </style>
</head>
<body>
  <header>
    <div class="logo-container"> 
      <img src="im/ctc1.png" alt="à¹‚à¸¥à¹‚à¸à¹‰à¸§à¸´à¸—à¸¢à¸²à¸¥à¸±à¸¢" />
      <div class="logo-text">
        <h2>à¸£à¸°à¸šà¸šà¸ªà¸¡à¸±à¸„à¸£à¹€à¸£à¸µà¸¢à¸™ à¸§à¸´à¸—à¸¢à¸²à¸¥à¸±à¸¢à¹€à¸—à¸„à¸™à¸´à¸„à¸Šà¸±à¸¢à¸ à¸¹à¸¡à¸´</h2>
        <h3>Chaiyaphum Technical College Enrollment System</h3>
      </div>
    </div>
    <nav>
      <a href="index.html" class="nav-link">à¸«à¸™à¹‰à¸²à¹à¸£à¸</a>
      <div class="dropdown">
        <a href="" class="nav-link dropbtn">
          à¹€à¸à¸µà¹ˆà¸¢à¸§à¸à¸±à¸šà¹€à¸£à¸² <i class="fas fa-caret-down fa-xs"></i>
        </a>
        <div class="dropdown-content">
          <a href="ExCom.html">à¸„à¸“à¸°à¸œà¸¹à¹‰à¸šà¸£à¸´à¸«à¸²à¸£</a>
          <a href="College_map.html">à¹à¸œà¸™à¸—à¸µà¹ˆà¸§à¸´à¸—à¸¢à¸²à¸¥à¸±à¸¢</a>
        </div>
      </div>
      <a href="register.html" class="nav-button">à¸ªà¸¡à¸±à¸„à¸£à¹€à¸£à¸µà¸¢à¸™</a>
    </nav>
  </header>

  <section class="form-section">
    <h2>à¹à¸šà¸šà¸Ÿà¸­à¸£à¹Œà¸¡à¸ªà¸¡à¸±à¸„à¸£à¹€à¸£à¸µà¸¢à¸™à¸­à¸­à¸™à¹„à¸¥à¸™à¹Œ</h2>
    <form action="#" method="post" id="enrollForm">
      <label for="fullname">à¸Šà¸·à¹ˆà¸­</label>
      <input type="text" id="fullname" name="fullname" placeholder="à¸à¸£à¸­à¸à¸Šà¸·à¹ˆà¸­" required>

      <label for="fullname">à¸™à¸²à¸¡à¸ªà¸à¸¸à¸¥</label>
      <input type="text" id="fullname" name="fullname" placeholder="à¸à¸£à¸­à¸à¸™à¸²à¸¡à¸ªà¸à¸¸à¸¥" required>

      <label for="idcard">à¸£à¸«à¸±à¸ªà¸šà¸±à¸•à¸£à¸›à¸£à¸°à¸Šà¸²à¸Šà¸™</label>
      <input type="text" id="idcard" name="idcard" placeholder="à¸à¸£à¸­à¸à¸£à¸«à¸±à¸ªà¸šà¸±à¸•à¸£à¸›à¸£à¸°à¸Šà¸²à¸Šà¸™ 13 à¸«à¸¥à¸±à¸" maxlength="13" required>

      <label for="address">à¸—à¸µà¹ˆà¸­à¸¢à¸¹à¹ˆà¸›à¸±à¸ˆà¸ˆà¸¸à¸šà¸±à¸™</label>
      <textarea id="address" name="address" rows="3" placeholder="à¸šà¹‰à¸²à¸™à¹€à¸¥à¸‚à¸—à¸µà¹ˆ à¸«à¸¡à¸¹à¹ˆ à¸–à¸™à¸™ à¸•à¸³à¸šà¸¥ à¸­à¸³à¹€à¸ à¸­ à¸ˆà¸±à¸‡à¸«à¸§à¸±à¸” à¸£à¸«à¸±à¸ªà¹„à¸›à¸£à¸©à¸“à¸µà¸¢à¹Œ" required></textarea>

      <label for="birthdate">à¸§à¸±à¸™à¹€à¸”à¸·à¸­à¸™à¸›à¸µà¹€à¸à¸´à¸”</label>
      <input type="date" id="birthdate" name="birthdate" required>

      <label for="phone">à¹€à¸šà¸­à¸£à¹Œà¹‚à¸—à¸£à¸¨à¸±à¸à¸—à¹Œ</label>
      <input type="tel" id="phone" name="phone" placeholder="à¸à¸£à¸­à¸à¹€à¸šà¸­à¸£à¹Œà¹‚à¸—à¸£à¸¨à¸±à¸à¸—à¹Œ" required>

      <label for="email">à¸­à¸µà¹€à¸¡à¸¥</label>
      <input type="email" id="email" name="email" placeholder="example@email.com" required>

      <label>à¹à¸œà¸™à¸à¸—à¸µà¹ˆà¸•à¹‰à¸­à¸‡à¸à¸²à¸£à¸ªà¸¡à¸±à¸„à¸£</label>
      <div class="radio-group-container">
        <label class="radio-label">
          <input type="radio" name="department" value="à¹€à¸—à¸„à¹‚à¸™à¹‚à¸¥à¸¢à¸µà¸ªà¸²à¸£à¸ªà¸™à¹€à¸—à¸¨" required>
          <span class="radio-custom"></span> à¹€à¸—à¸„à¹‚à¸™à¹‚à¸¥à¸¢à¸µà¸ªà¸²à¸£à¸ªà¸™à¹€à¸—à¸¨
        </label>
        <label class="radio-label">
          <input type="radio" name="department" value="à¸Šà¹ˆà¸²à¸‡à¸¢à¸™à¸•à¹Œ">
          <span class="radio-custom"></span> à¸Šà¹ˆà¸²à¸‡à¸¢à¸™à¸•à¹Œ
        </label>
        <label class="radio-label">
          <input type="radio" name="department" value="à¸Šà¹ˆà¸²à¸‡à¸à¸¥à¹‚à¸£à¸‡à¸‡à¸²à¸™">
          <span class="radio-custom"></span> à¸Šà¹ˆà¸²à¸‡à¸à¸¥à¹‚à¸£à¸‡à¸‡à¸²à¸™
        </label>
        <label class="radio-label">
          <input type="radio" name="department" value="à¸­à¸´à¹€à¸¥à¹‡à¸à¸—à¸£à¸­à¸™à¸´à¸à¸ªà¹Œ">
          <span class="radio-custom"></span> à¸­à¸´à¹€à¸¥à¹‡à¸à¸—à¸£à¸­à¸™à¸´à¸à¸ªà¹Œ
        </label>
        <label class="radio-label">
          <input type="radio" name="department" value="à¹€à¸—à¸„à¹‚à¸™à¹‚à¸¥à¸¢à¸µà¸˜à¸¸à¸£à¸à¸´à¸ˆà¸”à¸´à¸ˆà¸´à¸—à¸±à¸¥">
          <span class="radio-custom"></span> à¹€à¸—à¸„à¹‚à¸™à¹‚à¸¥à¸¢à¸µà¸˜à¸¸à¸£à¸à¸´à¸ˆà¸”à¸´à¸ˆà¸´à¸—à¸±à¸¥
        </label>
        <label class="radio-label">
          <input type="radio" name="department" value="à¸à¸²à¸£à¸šà¸±à¸à¸Šà¸µ">
          <span class="radio-custom"></span> à¸à¸²à¸£à¸šà¸±à¸à¸Šà¸µ
        </label>
        <label class="radio-label">
          <input type="radio" name="department" value="à¸à¸²à¸£à¸•à¸¥à¸²à¸”">
          <span class="radio-custom"></span> à¸à¸²à¸£à¸•à¸¥à¸²à¸”
        </label>
        <label class="radio-label">
          <input type="radio" name="department" value="à¹€à¸—à¸„à¸„à¸²à¸—à¸£à¸­à¸™à¸´à¸à¸ªà¹Œ">
          <span class="radio-custom"></span> à¹€à¸—à¸„à¸„à¸²à¸—à¸£à¸­à¸™à¸´à¸à¸ªà¹Œ
        </label>
        <label class="radio-label">
          <input type="radio" name="department" value="à¸Šà¹ˆà¸²à¸‡à¹€à¸Šà¸·à¹ˆà¸­à¸¡">
          <span class="radio-custom"></span> à¸Šà¹ˆà¸²à¸‡à¹€à¸Šà¸·à¹ˆà¸­à¸¡
        </label>
        <label class="radio-label">
          <input type="radio" name="department" value="à¸Šà¹ˆà¸²à¸‡à¸à¹ˆà¸­à¸ªà¸£à¹‰à¸²à¸‡">
          <span class="radio-custom"></span> à¸Šà¹ˆà¸²à¸‡à¸à¹ˆà¸­à¸ªà¸£à¹‰à¸²à¸‡
        </label>
      </div>

      <label for="fullname">à¸Šà¸·à¹ˆà¸­-à¸™à¸²à¸¡à¸ªà¸à¸¸à¸¥à¸šà¸´à¸”à¸²</label>
      <input type="text" id="fullname" name="fullname" placeholder="à¸à¸£à¸­à¸à¸Šà¸·à¹ˆà¸­-à¸™à¸²à¸¡à¸ªà¸à¸¸à¸¥à¸šà¸´à¸”à¸²" required>
      <label for="fullname">à¸­à¸²à¸Šà¸µà¸à¸šà¸´à¸”à¸²</label>
      <input type="text" id="fullname" name="fullname" placeholder="à¸à¸£à¸­à¸à¸­à¸²à¸Šà¸µà¸à¸šà¸´à¸”à¸²" required>
      <label for="phone">à¹€à¸šà¸­à¸£à¹Œà¹‚à¸—à¸£à¸¨à¸±à¸à¸—à¹Œà¸šà¸´à¸”à¸²</label>
      <input type="tel" id="phone" name="phone" placeholder="à¸à¸£à¸­à¸à¹€à¸šà¸­à¸£à¹Œà¹‚à¸—à¸£à¸¨à¸±à¸à¸—à¹Œà¸šà¸´à¸”à¸²" required>
      <label for="fullname">à¸Šà¸·à¹ˆà¸­-à¸™à¸²à¸¡à¸ªà¸à¸¸à¸¥à¸¡à¸²à¸£à¸”à¸²</label>
      <input type="text" id="fullname" name="fullname" placeholder="à¸à¸£à¸­à¸à¸Šà¸·à¹ˆà¸­-à¸™à¸²à¸¡à¸ªà¸à¸¸à¸¥à¸¡à¸²à¸£à¸”à¸²" required>
      <label for="fullname">à¸­à¸²à¸Šà¸µà¸à¸¡à¸²à¸£à¸”à¸²</label>
      <input type="text" id="fullname" name="fullname" placeholder="à¸à¸£à¸­à¸à¸­à¸²à¸Šà¸µà¸à¸¡à¸²à¸£à¸”à¸²" required>
      <label for="phone">à¹€à¸šà¸­à¸£à¹Œà¹‚à¸—à¸£à¸¨à¸±à¸à¸—à¹Œà¸¡à¸²à¸£à¸”à¸²</label>
      <input type="tel" id="phone" name="phone" placeholder="à¸à¸£à¸­à¸à¹€à¸šà¸­à¸£à¹Œà¹‚à¸—à¸£à¸¨à¸±à¸à¸—à¹Œà¸¡à¸²à¸£à¸”à¸²" required>
      
      <button type="submit">à¸ªà¹ˆà¸‡à¹ƒà¸šà¸ªà¸¡à¸±à¸„à¸£</button>
    </form>
  </section>

   <footer>
    <div class="container">
      <div class="footer-contact">
        <p>
          à¸§à¸´à¸—à¸¢à¸²à¸¥à¸±à¸¢à¹€à¸—à¸„à¸™à¸´à¸„à¸Šà¸±à¸¢à¸ à¸¹à¸¡à¸´ | 240 à¸«à¸¡à¸¹à¹ˆ 4 à¸–à¸™à¸™à¸­à¸‡à¸„à¹Œà¸à¸²à¸£à¸šà¸£à¸´à¸«à¸²à¸£à¸ªà¹ˆà¸§à¸™à¸ˆà¸±à¸‡à¸«à¸§à¸±à¸” à¸ªà¸²à¸¢ 2 à¸•à¸³à¸šà¸¥à¹ƒà¸™à¹€à¸¡à¸·à¸­à¸‡ à¸­à¸³à¹€à¸ à¸­à¹€à¸¡à¸·à¸­à¸‡ à¸ˆà¸±à¸‡à¸«à¸§à¸±à¸”à¸Šà¸±à¸¢à¸ à¸¹à¸¡à¸´ 36000<br>
          à¹‚à¸—à¸£à¸¨à¸±à¸à¸—à¹Œ: 0-4481-2075-6 | à¸­à¸µà¹€à¸¡à¸¥: cptc2000@yahoo.com
        </p>
      </div>
      <div class="footer-copyright">
        <p>Â© 2025 à¸§à¸´à¸—à¸¢à¸²à¸¥à¸±à¸¢à¹€à¸—à¸„à¸™à¸´à¸„à¸Šà¸±à¸¢à¸ à¸¹à¸¡à¸´ | à¸à¸±à¸’à¸™à¸²à¹‚à¸”à¸¢à¹à¸œà¸™à¸à¹€à¸—à¸„à¹‚à¸™à¹‚à¸¥à¸¢à¸µà¸ªà¸²à¸£à¸ªà¸™à¹€à¸—à¸¨</p>
      </div>
    </div>
  </footer>

  <!-- Chatbot Button -->
  <div class="chatbot-btn" id="chatbotBtn" title="à¹€à¸›à¸´à¸”à¹à¸Šà¸—">
    <i class="fas fa-robot"></i>
  </div>

  <div class="chatbox" id="chatbox">
    <div class="chatbox-header">
      CTC AI Chat
      <span style="cursor:pointer;" id="closeChat">âœ–</span>
    </div>
    <div class="chatbox-body" id="chatBody">
      <div class="bot-msg message">à¸ªà¸§à¸±à¸ªà¸”à¸µà¸„à¹ˆà¸° à¸‰à¸±à¸™à¸„à¸·à¸­ CTC AI! à¸•à¹‰à¸­à¸‡à¸à¸²à¸£à¹ƒà¸«à¹‰à¸Šà¹ˆà¸§à¸¢à¸­à¸°à¹„à¸£à¹„à¸«à¸¡à¸„à¸° ğŸ˜Š</div>
    </div>
    <div class="chatbox-input">
      <input type="text" id="chatInput" placeholder="à¸à¸´à¸¡à¸à¹Œà¸‚à¹‰à¸­à¸„à¸§à¸²à¸¡..." />
      <button id="sendMsg"><i class="fas fa-paper-plane"></i></button>
    </div>
  </div>

  <div id="botIntro">
    
    <button id="stopBotBtn" class="stop-button" title="à¸«à¸¢à¸¸à¸”">âœ–</button>
    
    <div id="botFace">
        <div class="eye-container">
            <div class="eye left-eye"></div>
            <div class="eye right-eye"></div>
        </div>
        <div id="mouth" class="wave-mouth">
            <div class="wave-bar"></div>
            <div class="wave-bar"></div>
            <div class="wave-bar"></div>
            <div class="wave-bar"></div>
        </div>
    </div>
    <p id="botText">à¸à¸³à¸¥à¸±à¸‡à¸à¸¹à¸”</p>
  </div>

  <audio id="botVoice" src="im/à¸ªà¸§à¸±à¸ªà¸”à¸µà¸„à¸£à¸±à¸š (1).mp3" preload="auto"></audio>
  
  <div id="botControls">
      <button id="listenButton" title="à¸à¸¹à¸”à¸à¸±à¸š AI">
          <i class="fas fa-microphone"></i>
      </button>
      <p id="statusText">
          à¸à¸”à¸›à¸¸à¹ˆà¸¡à¹€à¸à¸·à¹ˆà¸­à¹€à¸£à¸´à¹ˆà¸¡à¸à¸¹à¸”
      </p>
  </div>
 
<script>
  // à¹€à¸£à¸²à¸ˆà¸°à¹ƒà¸Šà¹‰ 'DOMContentLoaded' à¹€à¸à¸µà¸¢à¸‡à¸„à¸£à¸±à¹‰à¸‡à¹€à¸”à¸µà¸¢à¸§
// à¹€à¸à¸·à¹ˆà¸­à¹€à¸£à¸´à¹ˆà¸¡à¸à¸²à¸£à¸—à¸³à¸‡à¸²à¸™à¸‚à¸­à¸‡à¸ªà¸„à¸£à¸´à¸›à¸•à¹Œà¸—à¸±à¹‰à¸‡à¸«à¸¡à¸” à¸«à¸¥à¸±à¸‡à¸ˆà¸²à¸ HTML à¹‚à¸«à¸¥à¸”à¹€à¸ªà¸£à¹‡à¸ˆ
document.addEventListener('DOMContentLoaded', function() {

Â  Â  // ===========================================
Â  Â  // ===== ğŸš€ PAGE SCRIPT (Slider, Chat, etc) =====
Â  Â  // (à¸ªà¹ˆà¸§à¸™à¸™à¸µà¹‰à¸—à¸³à¸‡à¸²à¸™à¹à¸¢à¸à¸•à¹ˆà¸²à¸‡à¸«à¸²à¸)
Â  Â  // ===========================================

Â  Â  // (à¹‚à¸„à¹‰à¸” Slider à¸‚à¸­à¸‡à¸„à¸¸à¸“...)
Â  Â  const sliderWrapper = document.querySelector('.slider-wrapper');
Â  Â  const slides = document.querySelectorAll('.slide');
Â  Â  const prevBtn = document.getElementById('prevBtn');
Â  Â  const nextBtn = document.getElementById('nextBtn');
Â  Â  const dotsContainer = document.querySelector('.slider-dots');
Â  Â  if (slides.length > 0) {
Â  Â  Â  Â  // (à¸•à¸£à¸£à¸à¸° Slider à¸—à¸±à¹‰à¸‡à¸«à¸¡à¸”...)
Â  Â  Â  Â  let currentIndex = 0;
Â  Â  Â  Â  const totalSlides = slides.length;
Â  Â  Â  Â  let slideInterval = null;
Â  Â  Â  Â  if (dotsContainer) {
Â  Â  Â  Â  Â  Â  for (let i = 0; i < totalSlides; i++) {
Â  Â  Â  Â  Â  Â  const dot = document.createElement('div');
Â  Â  Â  Â  Â  Â  dot.classList.add('dot');
Â  Â  Â  Â  Â  Â  dot.addEventListener('click', () => goToSlide(i));
Â  Â  Â  Â  Â  Â  dotsContainer.appendChild(dot);
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  }
Â  Â  Â  Â  function updateSlider() {
Â  Â  Â  Â  Â  Â  if (sliderWrapper) {
Â  Â  Â  Â  Â  Â  sliderWrapper.style.transform = `translateX(-${currentIndex * 100}%)`;
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  const dots = document.querySelectorAll('.dot');
Â  Â  Â  Â  Â  Â  if (dots.length > 0) {
Â  Â  Â  Â  Â  Â  dots.forEach((dot, index) => {
Â  Â  Â  Â  Â  Â  Â  Â  dot.classList.toggle('active', index === currentIndex);
Â  Â  Â  Â  Â  Â  });
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  }
Â  Â  Â  Â  function goToSlide(index) {
Â  Â  Â  Â  Â  Â  currentIndex = index;
Â  Â  Â  Â  Â  Â  updateSlider();
Â  Â  Â  Â  Â  Â  resetInterval();
Â  Â  Â  Â  }
Â  Â  Â  Â  function showNextSlide() {
Â  Â  Â  Â  Â  Â  currentIndex = (currentIndex + 1) % totalSlides;
Â  Â  Â  Â  Â  Â  updateSlider();
Â  Â  Â  Â  }
Â  Â  Â  Â  function showPrevSlide() {
Â  Â  Â  Â  Â  Â  currentIndex = (currentIndex - 1 + totalSlides) % totalSlides;
Â  Â  Â  Â  Â  Â  updateSlider();
Â  Â  Â  Â  }
Â  Â  Â  Â  function startInterval() {
Â  Â  Â  Â  Â  Â  slideInterval = setInterval(showNextSlide, 5000);
Â  Â  Â  Â  }
Â  Â  Â  Â  function resetInterval() {
Â  Â  Â  Â  Â  Â  if (slideInterval) clearInterval(slideInterval);
Â  Â  Â  Â  Â  Â  startInterval();
Â  Â  Â  Â  }
Â  Â  Â  Â  if (nextBtn) {
Â  Â  Â  Â  Â  Â  nextBtn.addEventListener('click', () => {
Â  Â  Â  Â  Â  Â  showNextSlide();
Â  Â  Â  Â  Â  Â  resetInterval();
Â  Â  Â  Â  Â  Â  });
Â  Â  Â  Â  }
Â  Â  Â  Â  if (prevBtn) {
Â  Â  Â   Â  Â  prevBtn.addEventListener('click', () => {
Â  Â  Â  Â  Â  Â  showPrevSlide();
Â  Â  Â  Â  Â  Â  resetInterval();
Â  Â  Â  Â  Â  Â  });
Â  Â  Â  Â  }
Â  Â  Â  Â  updateSlider();
Â  Â  Â  Â  startInterval();
Â  Â  }
Â  Â  
Â  Â  // (à¹‚à¸„à¹‰à¸” Chatbox à¸‚à¸­à¸‡à¸„à¸¸à¸“...)
Â  Â  const chatBtn = document.getElementById('chatbotBtn');
Â  Â  const chatbox = document.getElementById('chatbox');
Â  Â  const closeChat = document.getElementById('closeChat');
Â  Â  const chatBody = document.getElementById('chatBody');
Â  Â  const sendBtn = document.getElementById('sendMsg');
Â  Â  const chatInput = document.getElementById('chatInput');
Â  Â  if (chatBtn && chatbox && closeChat && chatBody && sendBtn && chatInput) {
Â  Â  Â  Â  // (à¸•à¸£à¸£à¸à¸° Chatbox à¸—à¸±à¹‰à¸‡à¸«à¸¡à¸”...)
Â  Â  Â  Â  chatBtn.addEventListener('click', () => {
Â  Â  Â  Â  Â  Â  chatbox.style.display = 'flex';
Â  Â  Â  Â  Â  Â  chatInput.focus();
Â  Â  Â  Â  });
Â  Â  Â  Â  closeChat.addEventListener('click', () => {
Â  Â  Â  Â  Â  Â  chatbox.style.display = 'none';
Â  Â  Â  Â  });
Â  Â  Â  Â  function appendMessage(text, sender = 'user') {
Â  Â  Â  Â  Â  Â  const msg = document.createElement('div');
Â  Â  Â  Â  Â  Â  msg.classList.add('message', sender === 'user' ? 'user-msg' : 'bot-msg');
Â  Â  Â  Â  Â  Â  msg.textContent = text;
Â  Â  Â  Â  Â  Â  chatBody.appendChild(msg);
Â  Â  Â  Â  Â  Â  chatBody.scrollTop = chatBody.scrollHeight;
Â  Â  Â  Â  Â  Â  return msg;
Â  Â  Â  Â  }
Â  Â  Â  Â  
Â  Â  Â  Â  // ========== ğŸ’¡ [à¹‚à¸„à¹‰à¸”à¸—à¸µà¹ˆà¹à¸à¹‰à¹„à¸‚à¹à¸¥à¹‰à¸§] ğŸ’¡ ==========
Â  Â  Â  Â  async function sendMessage() {
Â  Â  Â  Â  Â  Â  const text = chatInput.value.trim();
Â  Â  Â  Â  Â  Â  if (!text) return;
Â  Â  Â  Â  Â  Â  appendMessage(text, 'user');
Â  Â  Â  Â  Â  Â  chatInput.value = '';
Â  Â  Â  Â  Â  Â  const loadingMsg = appendMessage("à¸à¸³à¸¥à¸±à¸‡à¸›à¸£à¸°à¸¡à¸§à¸¥à¸œà¸¥...", 'bot');
Â  Â  Â  Â  Â  Â  try {
Â  Â  Â  Â  Â  Â  const response = await fetch('http://localhost:3401/api/chat', {
Â  Â  Â  Â  Â  Â  Â  Â  method: 'POST',
Â  Â  Â  Â  Â  Â  Â  Â  headers: { 'Content-Type': 'application/json' },
Â  Â  Â  Â  Â  Â  Â  Â  // [à¸ˆà¸¸à¸”à¸—à¸µà¹ˆ 1] à¹€à¸›à¸¥à¸µà¹ˆà¸¢à¸™à¸ˆà¸²à¸ 'message' à¹€à¸›à¹‡à¸™ 'prompt' à¹ƒà¸«à¹‰à¸•à¸£à¸‡à¸à¸±à¸šà¸šà¸­à¸—à¹€à¸ªà¸µà¸¢à¸‡
Â  Â  Â  Â  Â  Â  Â  Â  body: JSON.stringify({ prompt: text }), 
Â  Â  Â  Â  Â  Â  });
Â  Â  Â  Â  Â  Â  if (!response.ok) { throw new Error('Network response was not ok'); }
Â  Â  Â  Â  Â  Â  const data = await response.json();
Â  Â  Â  Â  Â  Â  // [à¸ˆà¸¸à¸”à¸—à¸µà¹ˆ 2] à¹ƒà¸Šà¹‰ logic à¸à¸²à¸£à¸”à¸¶à¸‡à¸„à¹ˆà¸² 'reply' à¹à¸šà¸šà¹€à¸”à¸µà¸¢à¸§à¸à¸±à¸šà¸šà¸­à¸—à¹€à¸ªà¸µà¸¢à¸‡
Â  Â  Â  Â  Â  Â  const reply = data.response || data.reply || 'à¸‚à¸­à¸­à¸ à¸±à¸¢ à¹„à¸¡à¹ˆà¸à¸šà¸„à¸³à¸•à¸­à¸š';
Â  Â  Â  Â  Â  Â  loadingMsg.textContent = reply;
Â  Â  Â  Â  Â  Â  } catch (error) {
Â  Â  Â  Â  Â  Â  console.error('Error:', error);
Â  Â  Â  Â  Â  Â  loadingMsg.textContent = 'à¸‚à¸­à¸­à¸ à¸±à¸¢à¸„à¹ˆà¸° à¹€à¸à¸´à¸”à¸‚à¹‰à¸­à¸œà¸´à¸”à¸à¸¥à¸²à¸”à¹ƒà¸™à¸à¸²à¸£à¹€à¸Šà¸·à¹ˆà¸­à¸¡à¸•à¹ˆà¸­';
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  }
Â  Â  Â  Â  // ==========================================

Â  Â  Â  Â  sendBtn.addEventListener('click', sendMessage);
Â  Â  Â  Â  chatInput.addEventListener('keypress', e => {
Â  Â  Â  Â  Â  Â  if (e.key === 'Enter') {
Â  Â  Â  Â  Â  Â  e.preventDefault();
Â  Â  Â  Â  Â  Â  sendMessage();
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  });
Â  Â  }

Â  Â  console.log("âœ… Page Scripts (Slider, Chat) Initialized");


Â  Â  // ==================================================
Â  Â  // ğŸ¤– BOT LOGIC (v11.4 - Cute Bot UI + Dual Logic)
Â  Â  // (à¸ªà¹ˆà¸§à¸™à¸™à¸µà¹‰à¸„à¸§à¸šà¸„à¸¸à¸¡ Idle ğŸ˜´ à¹à¸¥à¸°à¸›à¸¸à¹ˆà¸¡à¹„à¸¡à¸„à¹Œ ğŸ™ï¸)
Â  Â  // ==================================================

Â  Â  let botIntro = null;
Â  Â  let botText = null;
Â  Â  let audio = null; // <audio> à¸ªà¸³à¸«à¸£à¸±à¸šà¹€à¸ªà¸µà¸¢à¸‡ Idle
Â  Â  let listenButton = null; // à¸›à¸¸à¹ˆà¸¡à¹„à¸¡à¸„à¹Œ ğŸ™ï¸
Â  Â  let statusText = null;
Â  Â  let stopBotBtn = null; // à¸›à¸¸à¹ˆà¸¡à¸«à¸¢à¸¸à¸” (X)
Â  Â  
Â  Â  let isIntroVisible = false;
Â  Â  let isPlayingIdle = false; // true à¸–à¹‰à¸²à¹€à¸ªà¸µà¸¢à¸‡ Idle (à¸§à¸™à¸¥à¸¹à¸›) à¸à¸³à¸¥à¸±à¸‡à¹€à¸¥à¹ˆà¸™
Â  Â  let isVoiceBotActive = false; // ğŸ’¥ [v11.4] true à¸–à¹‰à¸²à¸šà¸­à¸—à¹€à¸ªà¸µà¸¢à¸‡ (à¹„à¸¡à¸„à¹Œ) à¸—à¸³à¸‡à¸²à¸™à¸­à¸¢à¸¹à¹ˆ
Â  Â  let audioUnlocked = false; 
Â  Â  let idlePlayed = false; Â  Â  Â 
Â  Â  let lastMoveTime = Date.now(); 
Â  Â  
Â  Â  const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;
Â  Â  let recognition = null;
Â  Â  const synth = window.speechSynthesis; 
Â  Â  
Â  Â  // ---------- Helpers (à¸ªà¸³à¸«à¸£à¸±à¸š Bot UI) ----------
Â  Â  function safeGet(id) { return document.getElementById(id); }
Â  Â  
Â  Â  function showIntroUI() {
Â  Â  Â  if (!botIntro) return;
Â  Â  Â  botIntro.style.display = "flex";
Â  Â  Â  setTimeout(() => { botIntro.style.opacity = "1"; }, 10);
Â  Â  Â  isIntroVisible = true;
Â  Â  }
Â  Â  function hideIntroUI() {
Â  Â  Â  if (!botIntro) return;
Â  Â  Â  botIntro.style.opacity = "0";
Â  Â  Â  setTimeout(() => {
Â  Â  Â  Â  if (botIntro) botIntro.style.display = "none";
Â  Â  Â  Â  isIntroVisible = false;
Â  Â  Â  }, 350); 
Â  Â  }
Â  Â  
Â  Â  // [v11.3] à¸Ÿà¸±à¸‡à¸à¹Œà¸Šà¸±à¸™à¸„à¸§à¸šà¸„à¸¸à¸¡à¸­à¸™à¸´à¹€à¸¡à¸Šà¸±à¸™à¸›à¸²à¸
Â  Â  function startMouthAnim(state = 'listen') {
Â  Â  Â  Â  if (!botIntro) return;
Â  Â  Â  Â  if (state === 'speak') {
Â  Â  Â  Â  Â  Â  botIntro.classList.remove('is-listening');
Â  Â  Â  Â  Â  Â  botIntro.classList.add('is-talking');
Â  Â  Â  Â  } else { // 'listen'
Â  Â  Â  Â  Â  Â  botIntro.classList.remove('is-talking');
Â  Â  Â  Â  Â  Â  botIntro.classList.add('is-listening');
Â  Â  Â  Â  }
Â  Â  }
Â  Â  function stopMouthAnim() {
Â  Â  Â  Â  if (botIntro) {
Â  Â  Â  Â  Â  Â  botIntro.classList.remove('is-listening');
Â  Â  Â  Â  Â  Â  botIntro.classList.remove('is-talking');
Â  Â  Â  Â  }
Â  Â  }

Â  Â  // ---------- ğŸ™ï¸ 1. à¸Ÿà¸±à¸‡à¸à¹Œà¸Šà¸±à¸™à¸‚à¸­à¸‡ "à¸šà¸­à¸—à¹€à¸ªà¸µà¸¢à¸‡" ğŸ™ï¸ ----------

Â  Â  function cancelVoiceBot(hide = true) {
Â  Â  Â  Â  console.log("Cancelling Voice Bot. Hide UI:", hide);
Â  Â  Â  Â  lastMoveTime = Date.now(); 
Â  Â  Â  Â  isVoiceBotActive = false; // ğŸ’¥ [v11.4] à¸šà¸­à¸—à¹€à¸ªà¸µà¸¢à¸‡à¹€à¸¥à¸´à¸à¸—à¸³à¸‡à¸²à¸™
Â  Â  Â  Â  
Â  Â  Â  Â  if (recognition) { try { recognition.stop(); } catch(e) {} }
Â  Â  Â  Â  try { synth.cancel(); } catch(e) {}
Â  Â  Â  Â  stopMouthAnim();

Â  Â  Â  Â  if (hide) {
Â  Â  Â  Â  Â  Â  hideIntroUI();
Â  Â  Â  Â  }

Â  Â  Â  Â  if (listenButton) {
Â  Â  Â  Â  Â  Â  listenButton.disabled = false;
Â  Â  Â  Â  }
Â  Â  Â  Â  if (statusText) {
Â  Â  Â  Â  Â  Â  statusText.textContent = "à¸à¸”à¸›à¸¸à¹ˆà¸¡à¹€à¸à¸·à¹ˆà¸­à¹€à¸£à¸´à¹ˆà¸¡à¸à¸¹à¸”";
Â  Â  Â  Â  }
Â  Â  }
Â  Â  
Â  Â  function speakText(text) {
Â  Â  Â  lastMoveTime = Date.now(); 
Â  Â  Â  try { synth.cancel(); } catch (e) {}
Â  Â  Â  
Â  Â  Â  const u = new SpeechSynthesisUtterance(text || "");
Â  Â  Â  u.lang = "th-TH";
Â  Â  Â  u.rate = 1.05;
Â  Â  Â  
Â  Â  Â  u.onstart = () => {
Â  Â  Â  Â  startMouthAnim('speak'); // à¸›à¸²à¸à¸‚à¸¢à¸±à¸š (à¸à¸¹à¸”)
Â  Â  Â  Â  if (!isIntroVisible) showIntroUI(); 
Â  Â  Â  Â  if (botText) botText.textContent = "à¸à¸³à¸¥à¸±à¸‡à¸•à¸­à¸š";
Â  Â  Â  };
Â  Â  Â  
Â  Â  Â  u.onend = () => {
Â  Â  Â  Â  // à¹€à¸¡à¸·à¹ˆà¸­à¸à¸¹à¸”à¸ˆà¸š, à¹„à¸¡à¹ˆà¸‹à¹ˆà¸­à¸™ UI
Â  Â  Â  Â  // à¹à¸„à¹ˆà¸£à¸µà¹€à¸‹à¹‡à¸•à¸›à¸¸à¹ˆà¸¡à¹„à¸¡à¸„à¹Œ ğŸ™ï¸ à¹ƒà¸«à¹‰ "à¸à¸£à¹‰à¸­à¸¡à¸–à¸²à¸¡à¸•à¹ˆà¸­"
Â  Â  Â  Â  cancelVoiceBot(false); // false = à¹„à¸¡à¹ˆà¸•à¹‰à¸­à¸‡à¸‹à¹ˆà¸­à¸™ UI
Â  Â  Â  Â  isVoiceBotActive = true; // ğŸ’¥ [v11.4] à¸¢à¸±à¸‡à¸„à¸‡ active à¹€à¸à¸·à¹ˆà¸­à¸£à¸­à¸–à¸²à¸¡à¸•à¹ˆà¸­
Â  Â  Â  Â  if (botText) botText.textContent = "à¸–à¸²à¸¡à¸•à¹ˆà¸­à¹„à¸”à¹‰à¹€à¸¥à¸¢à¸„à¸£à¸±à¸š";
Â  Â  Â  };
Â  Â  Â  
Â  Â  Â  synth.speak(u);
Â  Â  }
Â  Â  
Â  Â  async function getOllamaResponse(userPrompt) {
Â  Â  Â  lastMoveTime = Date.now(); 
Â  Â  Â  if (botText) botText.textContent = "à¸à¸³à¸¥à¸±à¸‡à¸›à¸£à¸°à¸¡à¸§à¸¥à¸œà¸¥";
Â  Â  Â  if (statusText) statusText.textContent = "à¸à¸³à¸¥à¸±à¸‡à¸„à¸´à¸”... ğŸ§ ";
Â  Â  Â  startMouthAnim('speak'); // à¸›à¸²à¸à¸‚à¸¢à¸±à¸š (à¸›à¸£à¸°à¸¡à¸§à¸¥à¸œà¸¥)
Â  Â  
Â  Â  Â  try {
Â  Â  Â  Â  const API_ENDPOINT = "http://localhost:3401/api/chat";
Â  Â  Â  Â  const res = await fetch(API_ENDPOINT, {
Â  Â  Â  Â  Â  method: "POST",
Â  Â  Â  Â  Â  headers: { "Content-Type": "application/json" },
Â  Â  Â  Â  Â  body: JSON.stringify({ prompt: userPrompt }),
Â  Â  Â  Â  });
Â  Â  Â  Â  if (!res.ok) throw new Error("response not ok " + res.status);
Â  Â  Â  Â  const data = await res.json();
Â  Â  Â  Â  const reply = data.response || data.reply || "à¸‚à¸­à¸­à¸ à¸±à¸¢ à¹„à¸¡à¹ˆà¸à¸šà¸„à¸³à¸•à¸­à¸š";
Â  Â  Â  Â  speakText(reply);
Â  Â  Â  } catch (err) {
Â  Â  Â  Â  console.error("Error calling backend:", err);
Â  Â  Â  Â  speakText("à¸‚à¸­à¸­à¸ à¸±à¸¢à¸„à¹ˆà¸° à¹€à¸à¸´à¸”à¸‚à¹‰à¸­à¸œà¸´à¸”à¸à¸¥à¸²à¸”à¹ƒà¸™à¸à¸²à¸£à¹€à¸Šà¸·à¹ˆà¸­à¸¡à¸•à¹ˆà¸­à¸à¸±à¸šà¹€à¸‹à¸´à¸£à¹Œà¸Ÿà¹€à¸§à¸­à¸£à¹Œ");
Â  Â  Â  }
Â  Â  }

Â  Â  
Â  Â  // ---------- ğŸ˜´ 2. à¸Ÿà¸±à¸‡à¸à¹Œà¸Šà¸±à¸™à¸‚à¸­à¸‡ "à¸šà¸­à¸— Idle" ğŸ˜´ ----------

Â  Â  /**
Â  Â  Â * ğŸ’¥ (v11.4) à¸Ÿà¸±à¸‡à¸à¹Œà¸Šà¸±à¸™à¸™à¸µà¹‰ "à¹à¸ªà¸”à¸‡ UI" ğŸ’¥
Â  Â  Â * (à¸•à¸²à¸¡à¸—à¸µà¹ˆà¸„à¸¸à¸“à¸‚à¸­à¸¥à¹ˆà¸²à¸ªà¸¸à¸”)
Â  Â  Â */
Â  Â  async function attemptPlayIdleAudioOrFallback() {
Â  Â  Â  // [v11.4] à¸–à¹‰à¸²à¸šà¸­à¸—à¹€à¸ªà¸µà¸¢à¸‡à¸—à¸³à¸‡à¸²à¸™à¸­à¸¢à¸¹à¹ˆ (isVoiceBotActive) à¸«à¹‰à¸²à¸¡à¸£à¸šà¸à¸§à¸™
Â  Â  Â  if (idlePlayed || isPlayingIdle || synth.speaking || isVoiceBotActive) return;
Â  Â  Â  
Â  Â  Â  idlePlayed = true;
Â  Â  Â  isPlayingIdle = true; 
Â  Â  Â  console.log("User is idle. Attempting to play LOOPING idle sound (WITH UI)...");
Â  Â  Â  
Â  Â  Â  // ğŸ’¥ [v11.4] à¹à¸ªà¸”à¸‡ UI à¹à¸¥à¸°à¸‚à¸¢à¸±à¸šà¸›à¸²à¸
Â  Â  Â  showIntroUI();
Â  Â  Â  if (botText) botText.textContent = "CTC Auto";
Â  Â  Â  startMouthAnim('speak'); // à¹ƒà¸«à¹‰à¸›à¸²à¸à¸‚à¸¢à¸±à¸šà¹à¸šà¸š "à¸à¸¹à¸”"
Â  Â  
Â  Â  Â  if (audio) {
Â  Â  Â  Â  audio.currentTime = 0;
Â  Â  Â  Â  audio.loop = true; // à¸§à¸™à¸¥à¸¹à¸›
Â  Â  Â  Â  try {
Â  Â  Â  Â  Â  await audio.play();
Â  Â  Â  Â  Â  console.log("âœ… Idle MP3 started LOOPING (with UI).");
Â  Â  Â  Â  Â  return; 
Â  Â  Â  Â  } catch (err) {
Â  Â  Â  Â  Â  console.warn("âš ï¸ Idle MP3 play failed:", err);
Â  Â  Â  Â  }
Â  Â  Â  }
Â  Â  
Â  Â  Â  // Fallback (TTS - à¹„à¸¡à¹ˆà¸§à¸™à¸¥à¸¹à¸› à¹à¸•à¹ˆà¸¡à¸µ UI)
Â  Â  Â  try {
Â  Â  Â  Â  const ut = new SpeechSynthesisUtterance("à¸ªà¸§à¸±à¸ªà¸”à¸µà¸„à¸£à¸±à¸š");
Â  Â  Â  Â  ut.lang = "th-TH";
Â  Â  Â  Â  ut.rate = 1.05;
Â  Â  Â  Â  ut.onstart = () => { console.log("ğŸ”Š Fallback TTS started (plays once, with UI)."); startMouthAnim('speak'); };
Â  Â  Â  Â  ut.onend = () => {
Â  Â  Â  Â  Â  console.log("ğŸ”Š Fallback TTS ended");
Â  Â  Â  Â  Â  isPlayingIdle = false; 
Â  Â  Â  Â  Â  stopMouthAnim();
Â  Â  Â  Â  Â  if (botText) botText.textContent = "à¸à¸£à¹‰à¸­à¸¡à¸Šà¹ˆà¸§à¸¢à¹€à¸«à¸¥à¸·à¸­à¸„à¸£à¸±à¸š";
Â  Â  Â  Â  Â  // (à¹€à¸£à¸²à¸ˆà¸°à¹„à¸¡à¹ˆà¸‹à¹ˆà¸­à¸™ UI à¸—à¸µà¹ˆà¸™à¸µà¹ˆ à¹ƒà¸«à¹‰à¸£à¸­à¸„à¸™à¸‚à¸¢à¸±à¸šà¹€à¸¡à¸²à¸ªà¹Œ)
Â  Â  Â  Â  };
Â  Â  Â  Â  synth.speak(ut);
Â  Â  Â  } catch (e) {
Â  Â  Â  Â  console.error("âŒ speechSynthesis fallback failed:", e);
Â  Â  Â  Â  isPlayingIdle = false;
Â  Â  Â  Â  stopMouthAnim();
Â  Â  Â  }
Â  Â  }
Â  Â  
Â  Â  /**
Â  Â  Â * ğŸ’¥ (v11.4) à¸Ÿà¸±à¸‡à¸à¹Œà¸Šà¸±à¸™à¸™à¸µà¹‰ "à¸«à¸¢à¸¸à¸”à¹€à¸ªà¸µà¸¢à¸‡à¹à¸¥à¸°à¸‹à¹ˆà¸­à¸™ UI" ğŸ’¥
Â  Â  Â * (à¹€à¸¡à¸·à¹ˆà¸­à¸œà¸¹à¹‰à¹ƒà¸Šà¹‰à¸‚à¸¢à¸±à¸šà¹€à¸¡à¸²à¸ªà¹Œ)
Â  Â  Â */
Â  Â  function cancelIdleAndStopAudio() {
Â  Â  Â  lastMoveTime = Date.now();
Â  Â  Â  
Â  Â  Â  // [v11.4] à¸Ÿà¸±à¸‡à¸à¹Œà¸Šà¸±à¸™à¸™à¸µà¹‰à¸ˆà¸°à¸«à¸¢à¸¸à¸”à¹€à¸‰à¸à¸²à¸°à¹€à¸ªà¸µà¸¢à¸‡ Idle MP3
Â  Â  Â  // à¹à¸¥à¸°à¸ˆà¸°à¸‹à¹ˆà¸­à¸™ UI (à¸–à¹‰à¸²à¸¡à¸±à¸™à¸–à¸¹à¸à¹à¸ªà¸”à¸‡à¹‚à¸”à¸¢à¸šà¸­à¸— Idle)
Â  Â  Â  if (isPlayingIdle) {
Â  Â  Â  Â  console.log("User moved. Stopping idle loop and hiding UI.");
Â  Â  Â  Â  if (audio) {
Â  Â  Â  Â  Â  Â  try { 
Â  Â  Â  Â  Â  Â  Â  audio.pause(); 
Â  Â  Â  Â  Â  Â  Â  audio.currentTime = 0; 
Â  Â  Â  Â  Â  Â  Â  audio.loop = false; 
Â  Â  Â  Â  Â  Â  } catch(e) {}
Â  Â  Â  Â  }
Â  Â  Â  Â  try { synth.cancel(); } catch(e) {} // à¸«à¸¢à¸¸à¸” Fallback TTS
Â  Â  Â  Â  
Â  Â  Â  Â  isPlayingIdle = false;
Â  Â  Â  Â  
Â  Â  Â  Â  // à¸‹à¹ˆà¸­à¸™ UI à¹à¸¥à¸°à¸«à¸¢à¸¸à¸”à¸›à¸²à¸
Â  Â  Â  Â  hideIntroUI();
Â  Â  Â  Â  stopMouthAnim();
Â  Â  Â  }
Â  Â  }
Â  Â  
Â  Â  
Â  Â  // ---------- 3. Initialize (à¸•à¸±à¹‰à¸‡à¸„à¹ˆà¸²à¹€à¸£à¸´à¹ˆà¸¡à¸•à¹‰à¸™) ----------
Â  Â  
Â  Â  function tryUnlockAudioOnGesture() {
Â  Â  Â  if (audioUnlocked) return;
Â  Â  Â  if (!audio) { audioUnlocked = true; return; } 
Â  Â  Â  audio.play().then(() => {
Â  Â  Â  Â  audio.pause();
Â  Â  Â  Â  audio.currentTime = 0;
Â  Â  Â  Â  audioUnlocked = true;
Â  Â  Â  Â  console.log("ğŸ”“ Audio unlocked by user gesture.");
Â  Â  Â  }).catch(err => {
Â  Â  Â  Â  audioUnlocked = true; 
Â  Â  Â  Â  console.warn("âš ï¸ Audio unlock attempt rejected:", err);
Â  Â  Â  });
Â  Â  }
Â  
Â  Â  // 1. à¸«à¸² Elements à¸‚à¸­à¸‡ Bot à¸—à¸±à¹‰à¸‡à¸«à¸¡à¸”
Â  Â  botIntro = safeGet("botIntro");
Â  Â  botText = safeGet("botText");
Â  Â  audio = safeGet("botVoice");
Â  Â  listenButton = safeGet("listenButton");
Â  Â  statusText = safeGet("statusText");
Â  Â  stopBotBtn = safeGet("stopBotBtn"); 
Â  Â  
Â  Â  // 2. à¹€à¸Šà¹‡à¸„à¸§à¹ˆà¸²à¸«à¸²à¹€à¸ˆà¸­à¹„à¸«à¸¡
Â  Â  if (!listenButton) { console.warn("listenButton not found."); }
Â  Â  if (!botText) { console.warn("botText not found."); }
Â  Â  if (!audio) { console.warn("botVoice audio not found. Check path 'im/à¸ªà¸§à¸±à¸ªà¸”à¸µà¸„à¸£à¸±à¸š (1).mp3'"); }
Â  Â  if (!stopBotBtn) { console.warn("stopBotBtn not found. The 'X' button won't work."); } 
Â  Â  
Â  Â  // 3. à¸›à¸¥à¸”à¸¥à¹‡à¸­à¸„à¹€à¸ªà¸µà¸¢à¸‡ (à¸„à¸£à¸±à¹‰à¸‡à¹à¸£à¸à¸—à¸µà¹ˆà¸„à¸¥à¸´à¸)
Â  Â  ["click", "touchstart", "keydown"].forEach(evt => {
Â  Â  Â  document.addEventListener(evt, tryUnlockAudioOnGesture, { once: true, passive: true });
Â  Â  });
Â  Â  
Â  Â  // 4. à¸”à¸±à¸à¸Ÿà¸±à¸‡à¸à¸²à¸£à¸‚à¸¢à¸±à¸šà¹€à¸¡à¸²à¸ªà¹Œ (à¹€à¸à¸·à¹ˆà¸­à¸«à¸¢à¸¸à¸” "à¸šà¸­à¸— Idle")
Â  Â  ["mousemove", "click", "scroll", "keydown", "touchstart"].forEach(evt => {
Â  Â  Â  document.addEventListener(evt, (e) => { 
Â  Â  Â  Â  // ğŸ’¥ [v11.4] à¸–à¹‰à¸²à¸šà¸­à¸—à¹€à¸ªà¸µà¸¢à¸‡à¸à¸³à¸¥à¸±à¸‡à¸—à¸³à¸‡à¸²à¸™à¸­à¸¢à¸¹à¹ˆ (à¹€à¸Šà¹ˆà¸™ à¸à¸³à¸¥à¸±à¸‡à¸à¸¹à¸”)
Â  Â  Â  Â  // à¸à¸²à¸£à¸‚à¸¢à¸±à¸šà¹€à¸¡à¸²à¸ªà¹Œ "à¸ˆà¸°à¸•à¹‰à¸­à¸‡à¹„à¸¡à¹ˆ" à¹„à¸›à¸›à¸´à¸” UI à¸‚à¸­à¸‡à¸¡à¸±à¸™
Â  Â  Â  Â  if (isVoiceBotActive) {
Â  Â  Â  Â  Â  Â  lastMoveTime = Date.now(); // à¹à¸„à¹ˆà¸£à¸µà¹€à¸‹à¹‡à¸•à¹€à¸§à¸¥à¸²
Â  Â  Â  Â  Â  Â  return;
Â  Â  Â  Â  }
Â  Â  Â  Â  
Â  Â  Â  Â  // à¸–à¹‰à¸²à¸šà¸­à¸—à¹€à¸ªà¸µà¸¢à¸‡à¹„à¸¡à¹ˆà¹„à¸”à¹‰à¸—à¸³à¸‡à¸²à¸™ (isVoiceBotActive = false)
Â  Â  Â  Â  // à¸à¸²à¸£à¸‚à¸¢à¸±à¸šà¹€à¸¡à¸²à¸ªà¹Œà¸ˆà¸°à¸—à¸³à¸«à¸™à¹‰à¸²à¸—à¸µà¹ˆ "à¸«à¸¢à¸¸à¸”à¸šà¸­à¸— Idle"
Â  Â  Â  Â  lastMoveTime = Date.now(); 
Â  Â  Â  Â  idlePlayed = false; Â  Â  Â 
Â  Â  Â  Â  
Â  Â  Â  Â  if (isPlayingIdle) {
Â  Â  Â  Â  Â  cancelIdleAndStopAudio(); // (à¸Ÿà¸±à¸‡à¸à¹Œà¸Šà¸±à¸™à¸™à¸µà¹‰à¸ˆà¸°à¸‹à¹ˆà¸­à¸™ UI)
Â  Â  Â  Â  } 
Â  Â  Â  }, { passive: true });
Â  Â  });
Â  Â  
Â  Â  // 5. ğŸ˜´ à¸•à¸±à¹‰à¸‡à¹€à¸§à¸¥à¸² "à¸šà¸­à¸— Idle" (à¹€à¸Šà¹‡à¸„à¸—à¸¸à¸ 2 à¸§à¸´)
Â  Â  const IDLE_MS = 15000;
Â  Â  const CHECK_INTERVAL_MS = 2000;
Â  Â  
Â  Â  setInterval(async () => {
Â  Â  Â  // [v11.4] à¸–à¹‰à¸²à¸šà¸­à¸—à¹€à¸ªà¸µà¸¢à¸‡à¸à¸³à¸¥à¸±à¸‡à¸—à¸³à¸‡à¸²à¸™ (isVoiceBotActive) à¸«à¹‰à¸²à¸¡à¸£à¸šà¸à¸§à¸™
Â  Â  Â  if (isPlayingIdle || idlePlayed || synth.speaking || isVoiceBotActive) return; 
Â  Â  Â  
Â  Â  Â  if (Date.now() - lastMoveTime > IDLE_MS) {
Â  Â  Â  Â  await attemptPlayIdleAudioOrFallback(); 
Â  Â  Â  }
Â  Â  Â  
Â  Â  }, CHECK_INTERVAL_MS);
Â  Â  
Â  Â  // 6. à¸•à¸±à¹‰à¸‡à¸„à¹ˆà¸² "à¸šà¸­à¸—à¹€à¸ªà¸µà¸¢à¸‡" (SpeechRecognition)
Â  Â  if (!SpeechRecognition) {
Â  Â  Â  console.warn("SpeechRecognition not supported in this browser.");
Â  Â  Â  if (statusText) statusText.textContent = "à¸šà¸£à¸²à¸§à¹€à¸‹à¸­à¸£à¹Œà¸‚à¸­à¸‡à¸„à¸¸à¸“à¹„à¸¡à¹ˆà¸£à¸­à¸‡à¸£à¸±à¸šà¸à¸²à¸£à¸à¸¹à¸”";
Â  Â  } else {
Â  Â  Â  recognition = new SpeechRecognition();
Â  Â  Â  recognition.lang = "th-TH";
Â  Â  Â  recognition.interimResults = false;
Â  Â  Â  recognition.maxAlternatives = 1;
Â  Â  
Â  Â  Â  recognition.addEventListener("result", (ev) => {
Â  Â  Â  Â  try {
Â  Â  Â  Â  Â  const transcript = ev.results[0][0].transcript;
Â  Â  Â  Â  Â  if (statusText) statusText.textContent = `à¸„à¸¸à¸“à¸à¸¹à¸”à¸§à¹ˆà¸²: "${transcript}"`;
Â  Â  Â  Â  Â  getOllamaResponse(transcript); 
Â  Â  Â  Â  } catch (e) { console.error("Recognition result error:", e); }
Â  Â  Â  });
Â  Â  Â  
Â  Â  Â  recognition.addEventListener("speechend", () => {
Â  Â  Â  Â  try { recognition.stop(); } catch (e) {}
Â  Â  Â  });
Â  Â  Â  
Â  Â  Â  recognition.addEventListener("error", (ev) => {
Â  Â  Â  Â  console.warn("Speech recognition error:", ev.error);
Â  Â  Â  Â  const errorMsg = ev.error === "no-speech" ? "à¹„à¸¡à¹ˆà¹„à¸”à¹‰à¸¢à¸´à¸™à¹€à¸ªà¸µà¸¢à¸‡... à¸¥à¸­à¸‡à¸­à¸µà¸à¸„à¸£à¸±à¹‰à¸‡" : "à¹€à¸à¸´à¸”à¸‚à¹‰à¸­à¸œà¸´à¸”à¸à¸¥à¸²à¸”: " + ev.error;
Â  Â  Â  Â  
Â  Â  Â  Â  cancelVoiceBot(false); 
Â  Â  Â  Â  if (botText) botText.textContent = errorMsg; 
Â  Â  Â  Â  if (statusText) statusText.textContent = errorMsg;
Â  Â  Â  });
Â  Â  }
Â  Â  
Â  Â  // 7. ğŸ™ï¸ Event à¸›à¸¸à¹ˆà¸¡à¹„à¸¡à¹‚à¸„à¸£à¹‚à¸Ÿà¸™ (à¸ªà¸³à¸„à¸±à¸)
Â  Â  if (listenButton) {
Â  Â  Â  listenButton.addEventListener("click", (e) => {
Â  Â  Â  Â  e.stopPropagation(); 
Â  Â  Â  Â  tryUnlockAudioOnGesture(); 
Â  Â  Â  Â  
Â  Â  Â  Â  isVoiceBotActive = true; // ğŸ’¥ [v11.4] à¹€à¸£à¸´à¹ˆà¸¡à¹‚à¸«à¸¡à¸”à¸šà¸­à¸—à¹€à¸ªà¸µà¸¢à¸‡
Â  Â  Â  Â  lastMoveTime = Date.now();
Â  Â  Â  Â  idlePlayed = false;
Â  Â  
Â  Â  Â  Â  // 1. à¸–à¹‰à¸²à¹€à¸ªà¸µà¸¢à¸‡ idle à¸à¸³à¸¥à¸±à¸‡à¹€à¸¥à¹ˆà¸™ à¹ƒà¸«à¹‰à¸«à¸¢à¸¸à¸” (à¹à¸¥à¸°à¸‹à¹ˆà¸­à¸™ UI à¸‚à¸­à¸‡ idle)
Â  Â  Â  Â  if (isPlayingIdle) {
Â  Â  Â  Â  Â  cancelIdleAndStopAudio(); 
Â  Â  Â  Â  }
Â  Â  Â  Â  // 2. à¸–à¹‰à¸²à¸šà¸­à¸—à¸à¸³à¸¥à¸±à¸‡à¸à¸¹à¸” (à¸ˆà¸²à¸à¸„à¸£à¸±à¹‰à¸‡à¸à¹ˆà¸­à¸™) à¹ƒà¸«à¹‰à¸«à¸¢à¸¸à¸”
Â  Â  Â  Â  try { synth.cancel(); } catch (e) {}
Â  Â  
Â  Â  Â  Â  if (!recognition) {
Â  Â  Â  Â  Â  if (statusText) statusText.textContent = "à¸šà¸£à¸²à¸§à¹€à¸‹à¸­à¸£à¹Œà¹„à¸¡à¹ˆà¸£à¸­à¸‡à¸£à¸±à¸šà¸à¸²à¸£à¸Ÿà¸±à¸‡à¸”à¹‰à¸§à¸¢à¹€à¸ªà¸µà¸¢à¸‡";
Â  Â  Â  Â  Â  return;
Â  Â  Â  Â  }
Â  Â  
Â  Â  Â  Â  // 3. [v11.3] à¹à¸ªà¸”à¸‡ UI à¸šà¸­à¸—à¹€à¸ªà¸µà¸¢à¸‡ à¹à¸¥à¸°à¹€à¸£à¸´à¹ˆà¸¡ "à¸£à¸­à¸Ÿà¸±à¸‡"
Â  Â  Â  Â  showIntroUI();
Â  Â  Â  Â  startMouthAnim('listen'); // ğŸ’¥ [v11.3] à¸›à¸²à¸à¸‚à¸¢à¸±à¸š (à¸£à¸­à¸Ÿà¸±à¸‡)
Â  Â  Â  Â  if (statusText) statusText.textContent = "à¸à¸³à¸¥à¸±à¸‡à¸Ÿà¸±à¸‡... ğŸ™ï¸";
Â  Â  Â  Â  if (botText) botText.textContent = "à¸à¸³à¸¥à¸±à¸‡à¸Ÿà¸±à¸‡";
Â  Â  Â  if (listenButton) { listenButton.disabled = true; }
Â  Â  
Â  Â  Â  Â  // 4. à¹€à¸£à¸´à¹ˆà¸¡à¸Ÿà¸±à¸‡
Â  Â  Â  Â  try {
Â  Â  Â  Â  Â  recognition.start();
Â  Â  Â  Â  } catch (err) {
Â  Â  Â  Â  Â  console.error("recognition.start error:", err);
Â  Â  Â  Â  Â  cancelVoiceBot(false); 
Â  Â  Â  Â  }
Â  Â  Â  });
Â  Â  }

Â  Â  // 8. âœ–ï¸ Event à¸›à¸¸à¹ˆà¸¡à¸«à¸¢à¸¸à¸” (X)
Â  Â  if (stopBotBtn) {
Â  Â  Â  Â  stopBotBtn.addEventListener("click", (e) => {
Â  Â  Â  Â  Â  Â  e.stopPropagation(); 
Â  Â  Â  Â  Â  Â  console.log("Stop Button Clicked.");
Â  Â  Â  Â  Â  Â  cancelVoiceBot(true); // true = à¸‹à¹ˆà¸­à¸™ UI
Â  Â  Â  Â  });
Â  Â  }
Â  Â  
Â  Â  console.log("âœ… Bot Frontend (v11.4 - Dual UI Logic) Initialized");

}); // <-- à¸ªà¸´à¹‰à¸™à¸ªà¸¸à¸”à¸„à¸³à¸ªà¸±à¹ˆà¸‡à¸‚à¸­à¸‡ 'DOMContentLoaded'
  </script>
</body>
</html>
