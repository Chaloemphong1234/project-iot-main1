<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>‡πÅ‡∏ú‡∏ô‡∏ó‡∏µ‡πà‡∏ß‡∏¥‡∏ó‡∏¢‡∏≤‡∏•‡∏±‡∏¢ - ‡∏ß‡∏¥‡∏ó‡∏¢‡∏≤‡∏•‡∏±‡∏¢‡πÄ‡∏ó‡∏Ñ‡∏ô‡∏¥‡∏Ñ‡∏ä‡∏±‡∏¢‡∏†‡∏π‡∏°‡∏¥</title>

  <!-- Google Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Sarabun:wght@400;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body {
      font-family: "Sarabun", sans-serif;
      background: linear-gradient(135deg, #0a192f, #003366);
      color: #f0f0f0;
      scroll-behavior: smooth;
    }


    
    /* ===== Header ===== */
    header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      background-color: rgba(10, 25, 47, 0.8);
      padding: 10px 5%;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      z-index: 1000;
      backdrop-filter: blur(12px);
      border-bottom: 1px solid rgba(255, 255, 255, 0.1);
      transition: padding 0.3s;
    }

    .logo-container {
      display: flex;
      align-items: center;
      gap: 20px;
    }

    .logo-container img {
      height: 60px;
      width: auto;
    }

    .logo-text h2 {
      margin: 0;
      font-size: 1.5rem;
      color: #fff;
      font-weight: 700;
    }

    .logo-text h3 {
      margin: 2px 0 0 0;
      color: #00c6ff;
      font-size: 1rem;
      font-weight: 400;
      opacity: 0.9;
    }

    nav {
      display: flex;
      align-items: center;
      gap: 40px;
    }

    .nav-link, .dropbtn {
      color: #ffffff;
      text-decoration: none;
      font-size: 1.05rem;
      position: relative;
      transition: 0.3s;
      background: none;
      border: none;
      cursor: pointer;
      font-family: inherit;
    }

    .nav-link::after, .dropbtn::after {
      content: '';
      position: absolute;
      bottom: -4px;
      left: 50%;
      transform: translateX(-50%);
      width: 0;
      height: 2px;
      background-color: #00c6ff;
      transition: width 0.3s ease;
    }

    .nav-link:hover::after, .dropdown:hover .dropbtn::after {
      width: 100%;
    }

    .nav-link:hover, .dropdown:hover .dropbtn {
      color: #00c6ff;
    }

    .nav-button {
      background-color: #00c6ff;
      color: #0a192f;
      padding: 10px 25px;
      border-radius: 25px;
      font-weight: 700;
      text-decoration: none;
      box-shadow: 0 4px 15px rgba(0,198,255,0.3);
      transition: all 0.3s ease;
    }

    .nav-button:hover {
      background-color: #fff;
      color: #0078ff;
      transform: translateY(-3px);
      box-shadow: 0 8px 20px rgba(255,255,255,0.3);
    }

    /* ===== Dropdown ===== */
    .dropdown {
      position: relative;
    }

    .dropdown-content {
      display: none;
      position: absolute;
      top: 100%;
      left: 0;
      background-color: rgba(10, 25, 47, 0.95);
      min-width: 220px;
      border-radius: 0 0 10px 10px;
      border: 1px solid rgba(255,255,255,0.1);
      box-shadow: 0 8px 16px rgba(0,0,0,0.5);
      animation: fadeIn 0.3s ease;
    }

    .dropdown-content a {
      color: #f0f0f0;
      padding: 12px 20px;
      text-decoration: none;
      display: block;
      transition: background 0.3s;
    }

    .dropdown-content a:hover {
      background: rgba(0,198,255,0.15);
      color: #00c6ff;
    }

    .dropdown:hover .dropdown-content {
      display: block;
    }

    /* ===== Map Section ===== */
    .map-section {
      padding: 160px 20px 80px;
      max-width: 1100px;
      margin: auto;
      text-align: center;
    }

    .map-section h2 {
      font-size: 2.4rem;
      color: #fff;
      margin-bottom: 40px;
      position: relative;
    }

    .map-section h2::after {
      content: "";
      display: block;
      width: 90px;
      height: 4px;
      background-color: #00c6ff;
      margin: 12px auto 0;
      border-radius: 2px;
    }

  .map-image {
  background-color: rgba(255,255,255,0.05);
  border: 1px solid rgba(255,255,255,0.1);
  border-radius: 15px;
  overflow: hidden;
  box-shadow: 0 10px 25px rgba(0,198,255,0.2);
  padding: 10px;
  width: 50%;  /* üîπ ‡∏•‡∏î‡∏Ç‡∏ô‡∏≤‡∏î‡∏à‡∏≤‡∏Å 90% ‡πÄ‡∏´‡∏•‡∏∑‡∏≠ 50% */
  height: auto;
  margin: 0 auto; /* ‡∏à‡∏±‡∏î‡∏Å‡∏•‡∏≤‡∏á */
  text-align: center;
}
.map-image img {
  width: 100%;
  height: auto;
  border-radius: 10px;
  transition: transform 0.3s ease;
}



    .map-image img:hover {
      transform: scale(1.02);
    }

    .info-box {
      margin-top: 40px;
      font-size: 1.1rem;
      color: #ddd;
      line-height: 1.8;
    }

    footer {
      background: #061223;
      text-align: center;
      padding: 40px 20px;
      font-size: 1rem;
      color: #aaa;
    }
    .footer-contact p {
      margin-bottom: 20px;
      line-height: 1.8;
    }

    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(-10px); }
      to { opacity: 1; transform: translateY(0); }
    }

    @media (max-width: 768px) {
      header { flex-direction: column; align-items: flex-start; padding: 15px; }
      nav { flex-wrap: wrap; gap: 20px; margin-top: 10px; }
      .map-section { padding-top: 200px; }
    }

    .chatbot-btn {
      position: fixed;
      bottom: 45px;
      right: 30px;
      width: 60px;
      height: 60px;
      border-radius: 50%;
      background-color: #00c6ff;
      display: flex;
      justify-content: center;
      align-items: center;
      color: #0a192f;
      font-size: 1.8rem;
      box-shadow: 0 4px 15px rgba(0,0,0,0.3);
      cursor: pointer;
      z-index: 999;
      transition: transform 0.3s;
    }
    .chatbot-btn:hover {
      transform: scale(1.1);
      background-color: #fff;
    }

    /* ===== CHATBOX ===== */
    .chatbox {
      position: fixed;
      bottom: 120px;
      right: 30px;
      width: 350px;
      max-height: 500px;
      background-color: rgba(10, 25, 47, 0.95);
      border-radius: 15px;
      box-shadow: 0 4px 20px rgba(0,0,0,0.4);
      overflow: hidden;
      display: none;
      flex-direction: column;
      z-index: 1000;
      backdrop-filter: blur(10px);
    }
    .chatbox-header {
      background-color: #00c6ff;
      color: #0a192f;
      padding: 12px 20px;
      font-weight: 700;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    .chatbox-body {
      padding: 15px;
      overflow-y: auto;
      flex-grow: 1;
      display: flex;
      flex-direction: column;
      gap: 10px;
      min-height: 300px;
    }
    .message {
      padding: 10px 15px;
      border-radius: 15px;
      max-width: 80%;
      word-wrap: break-word;
      line-height: 1.4;
    }
    .user-msg {
      align-self: flex-end;
      background-color: #00c6ff;
      color: #0a192f;
    }
    .bot-msg {
      align-self: flex-start;
      background-color: #1b2b4a;
      color: #fff;
    }
    .chatbox-input {
      display: flex;
      border-top: 1px solid rgba(255,255,255,0.1);
    }
    .chatbox-input input {
      flex-grow: 1;
      padding: 12px 15px;
      border: none;
      background: transparent;
      color: #fff;
      outline: none;
      font-size: 1rem;
      font-family: "Sarabun", sans-serif;
    }
    .chatbox-input button {
      background: none;
      border: none;
      color: #00c6ff;
      font-size: 1.4rem;
      padding: 10px 15px;
      cursor: pointer;
      transition: color 0.3s;
    }
    .chatbox-input button:hover {
      color: #fff;
    }

    /* ===== Footer ===== */
    footer {
      background: #061223;
      text-align: center;
      padding: 40px 20px;
      font-size: 1rem;
      color: #aaa;
    }
    .footer-contact p {
      margin-bottom: 20px;
      line-height: 1.8;
    }

    /* ===== Animations ===== */
    @keyframes fadeInDown { from { opacity: 0; transform: translateY(-50px); } to { opacity: 1; transform: translateY(0); } }
    @keyframes fadeInUp { from { opacity: 0; transform: translateY(50px); } to { opacity: 1; transform: translateY(0); } }
    @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }

    /* ===== Responsive ===== */
    @media (max-width: 992px) {
      .logo-text h2 { font-size: 1.2rem; }
      .logo-text h3 { font-size: 0.9rem; }
    }

    @media (max-width: 768px) {
      html { scroll-padding-top: 170px; }
      header {
        flex-direction: column;
        align-items: center;
        padding: 15px;
      }
      .logo-container {
        width: 100%;
        justify-content: center;
      }
      .logo-text {
        text-align: center;
      }

      nav {
        margin-top: 15px;
        width: 100%;
        justify-content: center;
        align-items: center;
        flex-wrap: wrap;
        gap: 15px;
      }

      .nav-link,
      nav > .dropdown,
      .nav-button {
        margin: 0;
        font-size: 1rem;
      }

      nav > * {
        margin-left: 0;
      }

      .nav-link {
        padding: 5px 0;
      }

      .nav-button {
        padding: 8px 20px;
        font-size: 1rem;
      }

      .nav-link::after {
        display: none;
      }

      .slider-section { padding-top: 155px; }
      .hero h1 { font-size: 2.5rem; }
      .hero p { font-size: 1.1rem; }
      .content-section { padding: 60px 0; }
      .section-title { font-size: 2rem; }
      .course-grid, .news-grid { grid-template-columns: 1fr; }
      .slider-nav button { width: 40px; height: 40px; font-size: 1.5rem; }

      .chatbox {
        width: 90%;
        max-width: 350px;
        bottom: 110px;
        right: 5%;
      }
      .chatbot-btn {
        bottom: 30px;
      }
    }

    @media (max-width: 400px) {
      .chatbox {
        width: 95%;
        right: 2.5%;
        bottom: 100px;
      }
      .chatbot-btn {
        bottom: 20px;
        right: 20px;
      }
    }
    
    
    
   #botControls {
        position: fixed;
        bottom: 30px;
        z-index: 10000;
        left: 50%;
        transform: translateX(-50%);
        user-select: none;
        text-align: center;
    }

    /* 2. ‡∏õ‡∏∏‡πà‡∏°‡πÑ‡∏°‡∏Ñ‡πå üéôÔ∏è (‡∏ï‡∏±‡∏ß‡∏õ‡∏∏‡πà‡∏°) */
    #listenButton {
        width: 70px;
        height: 70px;
        border-radius: 50%;
        border: none;
        cursor: pointer;
        
        /* üé® ‡∏î‡∏µ‡πÑ‡∏ã‡∏ô‡πå‡πÉ‡∏´‡∏°‡πà: ‡∏™‡∏µ‡∏ò‡∏µ‡∏° + Glow */
        background-color: #00c6ff;
        color: #0a192f; /* ‡∏™‡∏µ‡πÑ‡∏≠‡∏Ñ‡∏≠‡∏ô‡∏Ç‡πâ‡∏≤‡∏á‡πÉ‡∏ô */
        font-size: 2rem; /* ‡∏Ç‡∏ô‡∏≤‡∏î‡πÑ‡∏≠‡∏Ñ‡∏≠‡∏ô */
        
        display: flex;
        justify-content: center;
        align-items: center;
        
        /* üé® ‡∏≠‡∏ô‡∏¥‡πÄ‡∏°‡∏ä‡∏±‡∏ô "‡∏´‡∏≤‡∏¢‡πÉ‡∏à" (Pulse) */
        box-shadow: 0 0 25px rgba(0, 198, 255, 0.5);
        animation: pulse-breathe 2.5s infinite ease-in-out;
        transition: all 0.3s ease;
    }
    #listenButton:hover {
        transform: scale(1.1);
        box-shadow: 0 0 35px rgba(0, 198, 255, 0.8);
    }
    #listenButton:disabled {
        opacity: 0.5;
        animation: none;
        cursor: not-allowed;
        transform: scale(1.0);
    }

    /* 3. ‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡πÉ‡∏ï‡πâ‡∏õ‡∏∏‡πà‡∏°‡πÑ‡∏°‡∏Ñ‡πå */
    #statusText {
        color: #f0f0f0; /* üé® ‡∏™‡∏µ‡∏Ç‡∏≤‡∏ß */
        margin-top: 15px;
        font-weight: 600;
        text-shadow: 0 0 10px rgba(0,0,0,0.5);
    }


    /* 4. ‡∏Å‡∏£‡∏≠‡∏ö‡∏ö‡∏≠‡∏ó‡∏™‡∏µ‡πà‡πÄ‡∏´‡∏•‡∏µ‡πà‡∏¢‡∏° (‡∏•‡πà‡∏≤‡∏á‡∏ã‡πâ‡∏≤‡∏¢) */
    #botIntro {
        position: fixed;
        bottom: 20px;
        left: 20px;
        width: 300px; 
        
        /* üé® ‡∏î‡∏µ‡πÑ‡∏ã‡∏ô‡πå‡πÉ‡∏´‡∏°‡πà: ‡∏Å‡∏£‡∏∞‡∏à‡∏Å‡∏ù‡πâ‡∏≤ (Glassmorphism) */
        background: rgba(10, 25, 47, 0.85); /* ‡∏™‡∏µ‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡∏Å‡∏±‡∏ö Header */
        backdrop-filter: blur(10px);
        border: 1px solid rgba(0, 198, 255, 0.3); /* ‡∏Ç‡∏≠‡∏ö‡∏™‡∏µ‡∏ü‡πâ‡∏≤‡πÄ‡∏£‡∏∑‡∏≠‡∏á‡πÜ */
        color: #f0f0f0; /* üé® ‡∏™‡∏µ‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Ç‡∏≤‡∏ß */

        padding: 15px;
        padding-top: 35px; /* ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ó‡∏µ‡πà‡∏ß‡πà‡∏≤‡∏á‡πÉ‡∏´‡πâ‡∏õ‡∏∏‡πà‡∏° X */
        border-radius: 12px;
        box-shadow: 0 8px 30px rgba(0,0,0,0.3);
        
        display: none; /* ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡∏î‡πâ‡∏ß‡∏¢‡∏Å‡∏≤‡∏£‡∏ã‡πà‡∏≠‡∏ô */
        opacity: 0;
        transition: opacity 0.35s ease, transform 0.35s ease;
        align-items: center;
        z-index: 10001;
    }

    /* 5. ‡∏õ‡∏∏‡πà‡∏°‡∏´‡∏¢‡∏∏‡∏î (X) */
    #botIntro .stop-button {
        position: absolute;
        top: 8px;
        right: 8px;
        background: rgba(255, 255, 255, 0.1);
        color: #f0f0f0;
        border: none;
        border-radius: 50%;
        width: 24px;
        height: 24px;
        cursor: pointer;
        font-size: 12px;
        line-height: 24px;
        text-align: center;
        font-weight: bold;
    }
    #botIntro .stop-button:hover {
        background: rgba(255, 255, 255, 0.2);
    }

    /* 6. ‡∏´‡∏ô‡πâ‡∏≤‡∏ö‡∏≠‡∏ó (‡∏ó‡∏µ‡πà‡∏Ñ‡∏£‡∏≠‡∏ö‡∏ï‡∏≤ + ‡∏õ‡∏≤‡∏Å) */
    #botFace { 
        margin-right: 12px;
        width: 60px; /* ‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Å‡∏ß‡πâ‡∏≤‡∏á‡∏Ñ‡∏á‡∏ó‡∏µ‡πà */
    }

    /* 7. üé® ‡∏ï‡∏≤‡∏Å‡∏∞‡∏û‡∏£‡∏¥‡∏ö üé® */
    .eye-container {
        display: flex;
        justify-content: space-between;
        width: 44px; /* (14*2) + 16 */
        margin: 0 auto 10px auto; /* 10px ‡πÄ‡∏´‡∏ô‡∏∑‡∏≠‡∏õ‡∏≤‡∏Å */
    }
    .eye {
        width: 14px;
        height: 14px;
        background: #f0f0f0;
        border-radius: 50%;
        animation: blink 4s infinite ease-in-out;
    }
    .eye.right-eye {
        animation-delay: 0.2s; /* ‡πÉ‡∏´‡πâ‡∏Å‡∏£‡∏∞‡∏û‡∏£‡∏¥‡∏ö‡πÑ‡∏°‡πà‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏Å‡∏±‡∏ô */
    }


    /* 8. üé® ‡∏õ‡∏≤‡∏Å‡πÅ‡∏ö‡∏ö‡∏Ñ‡∏•‡∏∑‡πà‡∏ô‡πÄ‡∏™‡∏µ‡∏¢‡∏á (Voice Wave) üé® */
    #mouth.wave-mouth {
        width: 40px; /* ‡∏Å‡∏ß‡πâ‡∏≤‡∏á 40px */
        height: 24px; /* ‡∏™‡∏π‡∏á 24px */
        display: flex;
        justify-content: space-between;
        align-items: flex-end; /* ‡πÅ‡∏ó‡πà‡∏á‡πÄ‡∏™‡∏µ‡∏¢‡∏á‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏à‡∏≤‡∏Å‡∏î‡πâ‡∏≤‡∏ô‡∏•‡πà‡∏≤‡∏á */
        margin-left: 10px; /* ‡∏à‡∏±‡∏î‡∏Å‡∏•‡∏≤‡∏á‡∏ô‡∏¥‡∏î‡∏´‡∏ô‡πà‡∏≠‡∏¢ */
    }
    .wave-bar {
        width: 7px; /* ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Å‡∏ß‡πâ‡∏≤‡∏á‡πÅ‡∏ó‡πà‡∏á (‡∏•‡∏î‡∏•‡∏á‡πÄ‡∏•‡πá‡∏Å‡∏ô‡πâ‡∏≠‡∏¢) */
        border-radius: 4px;
        background-color: #00c6ff; /* üé® ‡∏™‡∏µ‡∏ü‡πâ‡∏≤‡∏ò‡∏µ‡∏° */
        transition: height 0.2s ease;
        height: 4px; /* ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏π‡∏á‡∏õ‡∏Å‡∏ï‡∏¥ (‡∏ï‡∏≠‡∏ô‡πÑ‡∏°‡πà‡∏û‡∏π‡∏î) */
    }

    /* 8a. üé® ‡∏≠‡∏ô‡∏¥‡πÄ‡∏°‡∏ä‡∏±‡∏ô‡∏õ‡∏≤‡∏Å (‡∏ï‡∏≠‡∏ô‡∏£‡∏≠‡∏ü‡∏±‡∏á) üé® */
    #botIntro.is-listening #mouth .wave-bar {
        animation: listen-wave 1.5s infinite ease-in-out;
    }
    #botIntro.is-listening #mouth .wave-bar:nth-child(1) { animation-delay: 0.1s; }
    #botIntro.is-listening #mouth .wave-bar:nth-child(2) { animation-delay: 0.3s; }
    #botIntro.is-listening #mouth .wave-bar:nth-child(3) { animation-delay: 0.5s; }
    #botIntro.is-listening #mouth .wave-bar:nth-child(4) { animation-delay: 0.2s; }

    /* 8b. üé® ‡∏≠‡∏ô‡∏¥‡πÄ‡∏°‡∏ä‡∏±‡∏ô‡∏õ‡∏≤‡∏Å (‡∏ï‡∏≠‡∏ô‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏û‡∏π‡∏î) üé® */
    #botIntro.is-talking #mouth .wave-bar {
        animation: talk-wave 1s infinite ease-in-out;
    }
    #botIntro.is-talking #mouth .wave-bar:nth-child(1) { animation-delay: 0.1s; }
    #botIntro.is-talking #mouth .wave-bar:nth-child(2) { animation-delay: 0.3s; }
    #botIntro.is-talking #mouth .wave-bar:nth-child(3) { animation-delay: 0.5s; }
    #botIntro.is-talking #mouth .wave-bar:nth-child(4) { animation-delay: 0.2s; }


    /* 9. ‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ö‡∏≠‡∏ó (‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏û‡∏π‡∏î...) */
    #botText {
        font-family: "Sarabun", sans-serif;
        color: #f0f0f0; /* üé® ‡∏™‡∏µ‡∏Ç‡∏≤‡∏ß */
        font-size: 14px;
        margin: 0;
        flex: 1; /* ‡πÉ‡∏´‡πâ‡∏¢‡∏∑‡∏î‡πÄ‡∏ï‡πá‡∏°‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà‡∏ó‡∏µ‡πà‡πÄ‡∏´‡∏•‡∏∑‡∏≠ */
    }
    /* ‡∏≠‡∏ô‡∏¥‡πÄ‡∏°‡∏ä‡∏±‡∏ô ... (‡∏à‡∏∏‡∏î‡πÑ‡∏Ç‡πà‡∏õ‡∏•‡∏≤) */
    #botIntro.is-talking #botText:after,
    #botIntro.is-listening #botText:after {
        content: "...";
        display: inline-block;
        animation: talkingText 1s infinite;
    }


    /* ================================= */
    /* üé¨ KEYFRAMES (v11.4) üé¨ */
    /* ================================= */

    /* 1. ‡∏≠‡∏ô‡∏¥‡πÄ‡∏°‡∏ä‡∏±‡∏ô "‡∏´‡∏≤‡∏¢‡πÉ‡∏à" (Glow) ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏õ‡∏∏‡πà‡∏°‡πÑ‡∏°‡∏Ñ‡πå */
    @keyframes pulse-breathe {
        0%, 100% {
            transform: scale(1);
            box-shadow: 0 0 25px rgba(0, 198, 255, 0.5);
        }
        50% {
            transform: scale(1.05);
            box-shadow: 0 0 35px rgba(0, 198, 255, 0.8);
        }
    }

    /* 2. üé® ‡∏≠‡∏ô‡∏¥‡πÄ‡∏°‡∏ä‡∏±‡∏ô "‡∏Å‡∏∞‡∏û‡∏£‡∏¥‡∏ö‡∏ï‡∏≤" üé® */
    @keyframes blink {
        0%, 90%, 100% { transform: scaleY(1); }
        95% { transform: scaleY(0.1); }
    }
    
    /* 3. üé® ‡∏≠‡∏ô‡∏¥‡πÄ‡∏°‡∏ä‡∏±‡∏ô "‡∏Ñ‡∏•‡∏∑‡πà‡∏ô‡πÄ‡∏™‡∏µ‡∏¢‡∏á (‡∏£‡∏≠‡∏ü‡∏±‡∏á)" üé® */
    @keyframes listen-wave {
        0%, 100% { height: 4px; }
        50% { height: 12px; }
    }
    
    /* 4. üé® ‡∏≠‡∏ô‡∏¥‡πÄ‡∏°‡∏ä‡∏±‡∏ô "‡∏Ñ‡∏•‡∏∑‡πà‡∏ô‡πÄ‡∏™‡∏µ‡∏¢‡∏á (‡∏û‡∏π‡∏î)" üé® */
    @keyframes talk-wave {
        0%, 100% { height: 6px; }
        25% { height: 12px; }
        50% { height: 24px; }
        75% { height: 18px; }
    }

    /* 5. ‡∏≠‡∏ô‡∏¥‡πÄ‡∏°‡∏ä‡∏±‡∏ô "..." (‡∏à‡∏∏‡∏î‡πÑ‡∏Ç‡πà‡∏õ‡∏•‡∏≤) */
    @keyframes talkingText {
        0% { content: '.'; }
        33% { content: '..'; }
        66%, 100% { content: '...'; }
    }
  </style>
</head>

<body>
  <header>
    <div class="logo-container"> 
      <img src="im/ctc1.png" alt="‡πÇ‡∏•‡πÇ‡∏Å‡πâ‡∏ß‡∏¥‡∏ó‡∏¢‡∏≤‡∏•‡∏±‡∏¢" />
      <div class="logo-text">
        <h2>‡∏£‡∏∞‡∏ö‡∏ö‡∏™‡∏°‡∏±‡∏Ñ‡∏£‡πÄ‡∏£‡∏µ‡∏¢‡∏ô ‡∏ß‡∏¥‡∏ó‡∏¢‡∏≤‡∏•‡∏±‡∏¢‡πÄ‡∏ó‡∏Ñ‡∏ô‡∏¥‡∏Ñ‡∏ä‡∏±‡∏¢‡∏†‡∏π‡∏°‡∏¥</h2>
        <h3>Chaiyaphum Technical College Enrollment System</h3>
      </div>
    </div>
    <nav>
      <a href="index.html" class="nav-link">‡∏´‡∏ô‡πâ‡∏≤‡πÅ‡∏£‡∏Å</a>
      <div class="dropdown">
        <button class="dropbtn">‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß‡∏Å‡∏±‡∏ö‡πÄ‡∏£‡∏≤ <i class="fas fa-caret-down"></i></button>
        <div class="dropdown-content">
          <a href="ExCom.html">‡∏Ñ‡∏ì‡∏∞‡∏ú‡∏π‡πâ‡∏ö‡∏£‡∏¥‡∏´‡∏≤‡∏£</a>
          <a href="College_map.html">‡πÅ‡∏ú‡∏ô‡∏ó‡∏µ‡πà‡∏ß‡∏¥‡∏ó‡∏¢‡∏≤‡∏•‡∏±‡∏¢</a>
        </div>
      </div>
      <a href="register.html" class="nav-button">‡∏™‡∏°‡∏±‡∏Ñ‡∏£‡πÄ‡∏£‡∏µ‡∏¢‡∏ô</a>
    </nav>
  </header>

  <section class="map-section">
    <h2>‡πÅ‡∏ú‡∏ô‡∏ó‡∏µ‡πà‡∏ß‡∏¥‡∏ó‡∏¢‡∏≤‡∏•‡∏±‡∏¢‡πÄ‡∏ó‡∏Ñ‡∏ô‡∏¥‡∏Ñ‡∏ä‡∏±‡∏¢‡∏†‡∏π‡∏°‡∏¥</h2>

    <div class="map-image">
      <!-- üëá ‡∏ß‡∏≤‡∏á‡∏†‡∏≤‡∏û‡πÅ‡∏ú‡∏ô‡∏ó‡∏µ‡πà‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡πÉ‡∏ô‡πÇ‡∏ü‡∏•‡πÄ‡∏î‡∏≠‡∏£‡πå im ‡πÅ‡∏•‡πâ‡∏ß‡∏ï‡∏±‡πâ‡∏á‡∏ä‡∏∑‡πà‡∏≠ map_ctc.jpg -->
      <img src="im/map.jpg" alt="‡πÅ‡∏ú‡∏ô‡∏ó‡∏µ‡πà‡∏ß‡∏¥‡∏ó‡∏¢‡∏≤‡∏•‡∏±‡∏¢‡πÄ‡∏ó‡∏Ñ‡∏ô‡∏¥‡∏Ñ‡∏ä‡∏±‡∏¢‡∏†‡∏π‡∏°‡∏¥">
    </div>

    <div class="info-box">
      <p><strong>‡∏ó‡∏µ‡πà‡∏≠‡∏¢‡∏π‡πà:</strong>240 ‡∏´‡∏°‡∏π‡πà 4 ‡∏ñ‡∏ô‡∏ô‡∏≠‡∏á‡∏Ñ‡πå‡∏Å‡∏≤‡∏£‡∏ö‡∏£‡∏¥‡∏´‡∏≤‡∏£‡∏™‡πà‡∏ß‡∏ô‡∏à‡∏±‡∏á‡∏´‡∏ß‡∏±‡∏î ‡∏™‡∏≤‡∏¢ 2 ‡∏ï‡∏≥‡∏ö‡∏•‡πÉ‡∏ô‡πÄ‡∏°‡∏∑‡∏≠‡∏á ‡∏≠‡∏≥‡πÄ‡∏†‡∏≠‡πÄ‡∏°‡∏∑‡∏≠‡∏á ‡∏à‡∏±‡∏á‡∏´‡∏ß‡∏±‡∏î‡∏ä‡∏±‡∏¢‡∏†‡∏π‡∏°‡∏¥ 36000</p>
      <p><strong>‡πÇ‡∏ó‡∏£‡∏®‡∏±‡∏û‡∏ó‡πå:</strong> 044 812 075</p>
      <p><strong>‡πÄ‡∏ß‡πá‡∏ö‡πÑ‡∏ã‡∏ï‡πå:</strong> <a href="http://ccollege.ac.th/" target="_blank" style="color:#00c6ff;">https://www.ccollege.ac.th</a></p>
    </div>
  </section>

  <footer>
    <div class="container">
      <div class="footer-contact">
        <p>
          ‡∏ß‡∏¥‡∏ó‡∏¢‡∏≤‡∏•‡∏±‡∏¢‡πÄ‡∏ó‡∏Ñ‡∏ô‡∏¥‡∏Ñ‡∏ä‡∏±‡∏¢‡∏†‡∏π‡∏°‡∏¥ | 240 ‡∏´‡∏°‡∏π‡πà 4 ‡∏ñ‡∏ô‡∏ô‡∏≠‡∏á‡∏Ñ‡πå‡∏Å‡∏≤‡∏£‡∏ö‡∏£‡∏¥‡∏´‡∏≤‡∏£‡∏™‡πà‡∏ß‡∏ô‡∏à‡∏±‡∏á‡∏´‡∏ß‡∏±‡∏î ‡∏™‡∏≤‡∏¢ 2 ‡∏ï‡∏≥‡∏ö‡∏•‡πÉ‡∏ô‡πÄ‡∏°‡∏∑‡∏≠‡∏á ‡∏≠‡∏≥‡πÄ‡∏†‡∏≠‡πÄ‡∏°‡∏∑‡∏≠‡∏á ‡∏à‡∏±‡∏á‡∏´‡∏ß‡∏±‡∏î‡∏ä‡∏±‡∏¢‡∏†‡∏π‡∏°‡∏¥ 36000<br>
          ‡πÇ‡∏ó‡∏£‡∏®‡∏±‡∏û‡∏ó‡πå: 0-4481-2075
        </p>
      </div>
      <div class="footer-copyright">
        <p>¬© 2025 ‡∏ß‡∏¥‡∏ó‡∏¢‡∏≤‡∏•‡∏±‡∏¢‡πÄ‡∏ó‡∏Ñ‡∏ô‡∏¥‡∏Ñ‡∏ä‡∏±‡∏¢‡∏†‡∏π‡∏°‡∏¥ | ‡∏û‡∏±‡∏í‡∏ô‡∏≤‡πÇ‡∏î‡∏¢‡πÅ‡∏ú‡∏ô‡∏Å‡πÄ‡∏ó‡∏Ñ‡πÇ‡∏ô‡πÇ‡∏•‡∏¢‡∏µ‡∏™‡∏≤‡∏£‡∏™‡∏ô‡πÄ‡∏ó‡∏®</p>
      </div>
    </div>
  </footer>
 <div class="chatbot-btn" id="chatbotBtn" title="‡πÄ‡∏õ‡∏¥‡∏î‡πÅ‡∏ä‡∏ó">
    <i class="fas fa-robot"></i>
  </div>

  <div class="chatbox" id="chatbox">
    <div class="chatbox-header">
      CTC AI Chat
      <span style="cursor:pointer;" id="closeChat">‚úñ</span>
    </div>
    <div class="chatbox-body" id="chatBody">
      <div class="bot-msg message">‡∏™‡∏ß‡∏±‡∏™‡∏î‡∏µ‡∏Ñ‡πà‡∏∞ ‡∏â‡∏±‡∏ô‡∏Ñ‡∏∑‡∏≠ CTC AI! ‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡πÉ‡∏´‡πâ‡∏ä‡πà‡∏ß‡∏¢‡∏≠‡∏∞‡πÑ‡∏£‡πÑ‡∏´‡∏°‡∏Ñ‡∏∞ üòä</div>
    </div>
    <div class="chatbox-input">
      <input type="text" id="chatInput" placeholder="‡∏û‡∏¥‡∏°‡∏û‡πå‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°..." />
      <button id="sendMsg"><i class="fas fa-paper-plane"></i></button>
    </div>
  </div>
 
  <div id="botIntro">
    
    <button id="stopBotBtn" class="stop-button" title="‡∏´‡∏¢‡∏∏‡∏î">‚úñ</button>
    
    <div id="botFace">
        <div class="eye-container">
            <div class="eye left-eye"></div>
            <div class="eye right-eye"></div>
        </div>
        <div id="mouth" class="wave-mouth">
            <div class="wave-bar"></div>
            <div class="wave-bar"></div>
            <div class="wave-bar"></div>
            <div class="wave-bar"></div>
        </div>
    </div>
    <p id="botText">‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏û‡∏π‡∏î</p>
  </div>

  <audio id="botVoice" src="im/‡∏™‡∏ß‡∏±‡∏™‡∏î‡∏µ‡∏Ñ‡∏£‡∏±‡∏ö (1).mp3" preload="auto"></audio>
  
  <div id="botControls">
      <button id="listenButton" title="‡∏û‡∏π‡∏î‡∏Å‡∏±‡∏ö AI">
          <i class="fas fa-microphone"></i>
      </button>
      <p id="statusText">
          ‡∏Å‡∏î‡∏õ‡∏∏‡πà‡∏°‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏û‡∏π‡∏î
      </p>
  </div>
 
 
 
<script>
// ‡πÄ‡∏£‡∏≤‡∏à‡∏∞‡πÉ‡∏ä‡πâ 'DOMContentLoaded' ‡πÄ‡∏û‡∏µ‡∏¢‡∏á‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡πÄ‡∏î‡∏µ‡∏¢‡∏ß
document.addEventListener('DOMContentLoaded', function() {

    // ===========================================
    // ===== üöÄ PAGE SCRIPT (Slider, Chat, etc) =====
    // ===========================================
    
    // (‡πÇ‡∏Ñ‡πâ‡∏î Slider ‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì...)
    const sliderWrapper = document.querySelector('.slider-wrapper');
    const slides = document.querySelectorAll('.slide');
    const prevBtn = document.getElementById('prevBtn');
    const nextBtn = document.getElementById('nextBtn');
    const dotsContainer = document.querySelector('.slider-dots');
    if (slides.length > 0) {
        let currentIndex = 0;
        const totalSlides = slides.length;
        let slideInterval = null;
        if (dotsContainer) {
            for (let i = 0; i < totalSlides; i++) {
            const dot = document.createElement('div');
            dot.classList.add('dot');
            dot.addEventListener('click', () => goToSlide(i));
            dotsContainer.appendChild(dot);
            }
        }
        function updateSlider() {
            if (sliderWrapper) {
            sliderWrapper.style.transform = `translateX(-${currentIndex * 100}%)`;
            }
            const dots = document.querySelectorAll('.dot');
            if (dots.length > 0) {
            dots.forEach((dot, index) => {
                dot.classList.toggle('active', index === currentIndex);
            });
            }
        }
        function goToSlide(index) {
            currentIndex = index;
            updateSlider();
            resetInterval();
        }
        function showNextSlide() {
            currentIndex = (currentIndex + 1) % totalSlides;
            updateSlider();
        }
        function showPrevSlide() {
            currentIndex = (currentIndex - 1 + totalSlides) % totalSlides;
            updateSlider();
        }
        function startInterval() {
            slideInterval = setInterval(showNextSlide, 5000);
        }
        function resetInterval() {
            if (slideInterval) clearInterval(slideInterval);
            startInterval();
        }
        if (nextBtn) {
            nextBtn.addEventListener('click', () => {
            showNextSlide();
            resetInterval();
            });
        }
        if (prevBtn) {
            prevBtn.addEventListener('click', () => {
            showPrevSlide();
            resetInterval();
            });
        }
        updateSlider();
        startInterval();
    }
    
    // (‡πÇ‡∏Ñ‡πâ‡∏î Chatbox ‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì...)
    const chatBtn = document.getElementById('chatbotBtn');
    const chatbox = document.getElementById('chatbox');
    const closeChat = document.getElementById('closeChat');
    const chatBody = document.getElementById('chatBody');
    const sendBtn = document.getElementById('sendMsg');
    const chatInput = document.getElementById('chatInput');
    if (chatBtn && chatbox && closeChat && chatBody && sendBtn && chatInput) {
        function appendMessage(text, sender = 'user') {
            const msg = document.createElement('div');
            msg.classList.add('message', sender === 'user' ? 'user-msg' : 'bot-msg');
            msg.textContent = text;
            chatBody.appendChild(msg);
            chatBody.scrollTop = chatBody.scrollHeight;
            return msg;
        }
        chatBtn.addEventListener('click', () => {
            chatbox.style.display = 'flex';
            chatInput.focus();
        });
        closeChat.addEventListener('click', () => {
            chatbox.style.display = 'none';
        });
        
        async function sendMessage() {
            const text = chatInput.value.trim();
            if (!text) return;
            appendMessage(text, 'user');
            chatInput.value = '';
            const loadingMsg = appendMessage("‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏õ‡∏£‡∏∞‡∏°‡∏ß‡∏•‡∏ú‡∏•...", 'bot');
            try {
            const response = await fetch('http://localhost:3401/api/chat', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ prompt: text }), 
            });
            if (!response.ok) { throw new Error('Network response was not ok'); }
            const data = await response.json();
            const reply = data.response || data.reply || '‡∏Ç‡∏≠‡∏≠‡∏†‡∏±‡∏¢ ‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö';
            loadingMsg.textContent = reply;
            } catch (error) {
            console.error('Error:', error);
            loadingMsg.textContent = '‡∏Ç‡∏≠‡∏≠‡∏†‡∏±‡∏¢‡∏Ñ‡πà‡∏∞ ‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠';
            }
        }

        sendBtn.addEventListener('click', sendMessage);
        chatInput.addEventListener('keypress', e => {
            if (e.key === 'Enter') {
            e.preventDefault();
            sendMessage();
            }
        });
    }

    console.log("‚úÖ Page Scripts (Slider, Chat) Initialized");


    // =======================================================
    // ü§ñ BOT LOGIC (v12.4 - Single Play Logic)
    // =======================================================

    // ----------------------------------------------------
    // ‚ö†Ô∏è 1. ‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£ Polling
    // ----------------------------------------------------
    const BOT_STATUS_API_URL = 'http://localhost:3401/api/bot/status'; 
    const CHECK_INTERVAL_MS = 2000; 
    // ‚ö†Ô∏è ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤ Path ‡πÑ‡∏ü‡∏•‡πå‡πÄ‡∏™‡∏µ‡∏¢‡∏á‡∏ô‡∏µ‡πâ‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà
    const BOT_AUDIO_PATH = 'im/‡∏™‡∏ß‡∏±‡∏™‡∏î‡∏µ‡∏Ñ‡∏£‡∏±‡∏ö (1).mp3'; 
    
    // ----------------------------------------------------
    // 2. ‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡πÅ‡∏•‡∏∞ Elements
    // ----------------------------------------------------
    let botIntro = null;
    let botText = null;
    let listenButton = null; 
    let statusText = null;
    let stopBotBtn = null; 

    let isIntroVisible = false;
    let isBotVoicePlaying = false; 
    let isVoiceBotActive = false; // true ‡∏ñ‡πâ‡∏≤‡∏ö‡∏≠‡∏ó‡πÄ‡∏™‡∏µ‡∏¢‡∏á (‡πÑ‡∏°‡∏Ñ‡πå) ‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏≠‡∏¢‡∏π‡πà (Manual Chat)
    let audioUnlocked = false; 
    let lastServerCount = 0; // ‡∏£‡∏≠‡∏ö‡∏Å‡∏≤‡∏£‡∏û‡∏π‡∏î‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î‡∏ó‡∏µ‡πà Client ‡∏£‡∏±‡∏ö‡∏£‡∏π‡πâ (0 ‡∏´‡∏£‡∏∑‡∏≠ 1)
    let currentPollingTimeout = null; 
    
    const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;
    let recognition = null;
    const synth = window.speechSynthesis; 
    
    // ---------- Helpers (‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Bot UI) ----------
    function safeGet(id) { return document.getElementById(id); }
    
    function showIntroUI() {
      if (!botIntro) return;
      botIntro.style.display = "flex";
      setTimeout(() => { botIntro.style.opacity = "1"; }, 10);
      isIntroVisible = true;
    }
    function hideIntroUI() {
      if (!botIntro) return;
      botIntro.style.opacity = "0";
      setTimeout(() => {
        if (botIntro) botIntro.style.display = "none";
        isIntroVisible = false;
      }, 350); 
    }
    
    function startMouthAnim(state = 'listen') {
        if (!botIntro) return;
        if (state === 'speak') {
            botIntro.classList.remove('is-listening');
            botIntro.classList.add('is-talking');
        } else { // 'listen'
            botIntro.classList.remove('is-talking');
            botIntro.classList.add('is-listening');
        }
    }
    function stopMouthAnim() {
        if (botIntro) {
            botIntro.classList.remove('is-listening');
            botIntro.classList.remove('is-talking');
        }
    }

    // ---------- üéôÔ∏è 3. ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏Ç‡∏≠‡∏á "‡∏ö‡∏≠‡∏ó‡πÄ‡∏™‡∏µ‡∏¢‡∏á" üéôÔ∏è (Manual Chat) ----------

    function cancelVoiceBot(hide = true) {
        isVoiceBotActive = false; 
        
        if (recognition) { try { recognition.stop(); } catch(e) {} }
        try { synth.cancel(); } catch(e) {}
        stopMouthAnim();

        // ‡∏Å‡∏≤‡∏£‡∏ã‡πà‡∏≠‡∏ô UI ‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏ä‡πá‡∏Ñ‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡πÄ‡∏ã‡∏ô‡πÄ‡∏ã‡∏≠‡∏£‡πå‡∏î‡πâ‡∏ß‡∏¢
        if (hide && lastServerCount === 0) { 
            hideIntroUI();
        } else if (!hide && isIntroVisible) {
             if (botText) botText.textContent = "‡∏ñ‡∏≤‡∏°‡∏ï‡πà‡∏≠‡πÑ‡∏î‡πâ‡πÄ‡∏•‡∏¢‡∏Ñ‡∏£‡∏±‡∏ö";
             stopMouthAnim(); 
        }

        if (listenButton) {
            listenButton.disabled = false;
        }
        if (statusText) {
            statusText.textContent = "‡∏Å‡∏î‡∏õ‡∏∏‡πà‡∏°‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏û‡∏π‡∏î";
        }
         // ‡∏£‡∏µ‡∏™‡∏ï‡∏≤‡∏£‡πå‡∏ó Polling ‡∏ó‡∏±‡∏ô‡∏ó‡∏µ‡∏ó‡∏µ‡πà‡∏ö‡∏≠‡∏ó‡πÄ‡∏™‡∏µ‡∏¢‡∏á‡∏´‡∏¢‡∏∏‡∏î‡∏ó‡∏≥‡∏á‡∏≤‡∏ô
        if (currentPollingTimeout) clearTimeout(currentPollingTimeout);
        currentPollingTimeout = setTimeout(checkBotStatus, 1000); 
    }
    
    function speakText(text) {
      try { synth.cancel(); } catch (e) {}
      
      const u = new SpeechSynthesisUtterance(text || "");
      u.lang = "th-TH";
      u.rate = 1.05;
      
      u.onstart = () => {
        startMouthAnim('speak'); 
        if (!isIntroVisible) showIntroUI(); 
        if (botText) botText.textContent = "‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏ï‡∏≠‡∏ö";
      };
      
      u.onend = () => {
        cancelVoiceBot(false); 
        isVoiceBotActive = true; 
        if (botText) botText.textContent = "‡∏ñ‡∏≤‡∏°‡∏ï‡πà‡∏≠‡πÑ‡∏î‡πâ‡πÄ‡∏•‡∏¢‡∏Ñ‡∏£‡∏±‡∏ö";
      };
      
      synth.speak(u);
    }
    
    async function getOllamaResponse(userPrompt) {
      if (botText) botText.textContent = "‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏õ‡∏£‡∏∞‡∏°‡∏ß‡∏•‡∏ú‡∏•";
      if (statusText) statusText.textContent = "‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏Ñ‡∏¥‡∏î... üß†";
      startMouthAnim('speak'); 
    
      try {
        const API_ENDPOINT = "http://localhost:3401/api/chat";
        const res = await fetch(API_ENDPOINT, {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify({ prompt: userPrompt }),
        });
        if (!res.ok) throw new Error("response not ok " + res.status);
        const data = await res.json();
        const reply = data.response || data.reply || "‡∏Ç‡∏≠‡∏≠‡∏†‡∏±‡∏¢ ‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö";
        speakText(reply);
      } catch (err) {
        console.error("Error calling backend:", err);
        speakText("‡∏Ç‡∏≠‡∏≠‡∏†‡∏±‡∏¢‡∏Ñ‡πà‡∏∞ ‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠‡∏Å‡∏±‡∏ö‡πÄ‡∏ã‡∏¥‡∏£‡πå‡∏ü‡πÄ‡∏ß‡∏≠‡∏£‡πå");
      }
    }

    // ---------- üîä 4. ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏Ç‡∏≠‡∏á "‡∏ö‡∏≠‡∏ó Sensor" üîä ----------
    
    /**
     * @description ‡πÄ‡∏•‡πà‡∏ô‡πÄ‡∏™‡∏µ‡∏¢‡∏á‡∏ï‡πâ‡∏≠‡∏ô‡∏£‡∏±‡∏ö (‡πÄ‡∏•‡πà‡∏ô‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô)
     */
    function playSensorAudio() {
        // 1. ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡πÄ‡∏á‡∏∑‡πà‡∏≠‡∏ô‡πÑ‡∏Ç‡∏Å‡∏≤‡∏£‡πÄ‡∏•‡πà‡∏ô‡πÄ‡∏™‡∏µ‡∏¢‡∏á
        if (isBotVoicePlaying || isVoiceBotActive) {
            return;
        }

        isBotVoicePlaying = true;
        
        // 2. ‡πÅ‡∏™‡∏î‡∏á UI ‡πÅ‡∏•‡∏∞‡∏ï‡∏±‡πâ‡∏á‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞
        showIntroUI();
        startMouthAnim('speak'); 
        if (botText) botText.textContent = `‡∏¢‡∏¥‡∏ô‡∏î‡∏µ‡∏ï‡πâ‡∏≠‡∏ô‡∏£‡∏±‡∏ö`; 
       

        // 3. ‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÅ‡∏•‡∏∞‡πÄ‡∏•‡πà‡∏ô Audio Element
        const tempAudio = new Audio(BOT_AUDIO_PATH);
        
        tempAudio.onended = () => {
            isBotVoicePlaying = false; 
            
            // 4. ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï UI ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÄ‡∏™‡∏µ‡∏¢‡∏á‡∏à‡∏ö (‡∏û‡∏π‡∏î‡∏à‡∏ö‡πÅ‡∏•‡πâ‡∏ß ‡∏Ñ‡∏á UI ‡πÑ‡∏ß‡πâ‡∏£‡∏≠‡∏ñ‡∏≤‡∏°‡∏ï‡πà‡∏≠)
            if (botText) botText.textContent = "‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏ä‡πà‡∏ß‡∏¢‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡∏Ñ‡∏£‡∏±‡∏ö/‡∏ñ‡∏≤‡∏°‡∏ï‡πà‡∏≠‡πÑ‡∏î‡πâ‡πÄ‡∏•‡∏¢";
            stopMouthAnim(); 
            
            // ‡πÄ‡∏£‡∏µ‡∏¢‡∏Å Polling ‡∏ï‡πà‡∏≠‡∏ó‡∏±‡∏ô‡∏ó‡∏µ
            clearTimeout(currentPollingTimeout);
            currentPollingTimeout = setTimeout(checkBotStatus, 1000); 
        };

        tempAudio.onerror = (e) => {
            console.error("Audio playback error:", e);
            isBotVoicePlaying = false;
            if (botText) botText.textContent = "‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡∏î‡πâ‡∏≤‡∏ô‡πÄ‡∏™‡∏µ‡∏¢‡∏á (‡πÄ‡∏ä‡πá‡∏Ñ path/‡πÑ‡∏ü‡∏•‡πå)";
            stopMouthAnim();
            clearTimeout(currentPollingTimeout);
            currentPollingTimeout = setTimeout(checkBotStatus, CHECK_INTERVAL_MS); 
        };

        tempAudio.play().catch(err => {
            console.warn("Audio play failed (no user gesture?):", err);
            isBotVoicePlaying = false;
            if (botText) botText.textContent = "‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÄ‡∏•‡πà‡∏ô‡πÄ‡∏™‡∏µ‡∏¢‡∏á‡πÑ‡∏î‡πâ (‡∏ö‡∏£‡∏≤‡∏ß‡πÄ‡∏ã‡∏≠‡∏£‡πå‡∏ö‡∏•‡πá‡∏≠‡∏Å)";
            stopMouthAnim();
            clearTimeout(currentPollingTimeout);
            currentPollingTimeout = setTimeout(checkBotStatus, CHECK_INTERVAL_MS); 
        });
    }

    /**
     * @description Polling ‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡πÄ‡∏ã‡∏ô‡πÄ‡∏ã‡∏≠‡∏£‡πå‡πÅ‡∏•‡∏∞‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏Å‡∏≤‡∏£‡∏û‡∏π‡∏î‡∏à‡∏≤‡∏Å Backend
     */
    async function checkBotStatus() {
        // ‡∏´‡πâ‡∏≤‡∏°‡∏£‡∏ö‡∏Å‡∏ß‡∏ô‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏Ç‡∏≠‡∏á‡∏ö‡∏≠‡∏ó‡∏≠‡∏∑‡πà‡∏ô
        if (isBotVoicePlaying || isVoiceBotActive || synth.speaking) {
            currentPollingTimeout = setTimeout(checkBotStatus, CHECK_INTERVAL_MS);
            return; 
        }

        try {
            const res = await fetch(BOT_STATUS_API_URL, { 
                method: 'GET',
                headers: { 'Cache-Control': 'no-cache' } 
            });
            if (!res.ok) throw new Error(`HTTP error! status: ${res.status}`);
            const data = await res.json();
            
            const isPresence = data.isPresence || data.is_person_near; 
            const currentCount = data.count || data.playCount; 

            // 1. ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Å‡∏≤‡∏£‡∏°‡∏µ‡∏≠‡∏¢‡∏π‡πà‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏ô
            if (isPresence && currentCount > 0) {
                // MODIFIED LOGIC: ‡πÄ‡∏•‡πà‡∏ô‡πÄ‡∏™‡∏µ‡∏¢‡∏á‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡πÄ‡∏°‡∏∑‡πà‡∏≠ count ‡πÄ‡∏õ‡πá‡∏ô 1 ‡πÅ‡∏•‡∏∞‡πÄ‡∏õ‡πá‡∏ô‡∏£‡∏≠‡∏ö‡πÉ‡∏´‡∏°‡πà‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô (0 -> 1)
                if (currentCount >= 1 && lastServerCount === 0) {
                    console.log(`‚úÖ [POLL] Server ‡∏™‡∏±‡πà‡∏á‡∏û‡∏π‡∏î‡∏£‡∏≠‡∏ö‡πÅ‡∏£‡∏Å (1/1)`);
                    playSensorAudio(); 
                    lastServerCount = 1; // ‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡πÉ‡∏´‡πâ lastServerCount ‡πÄ‡∏õ‡πá‡∏ô 1 ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÑ‡∏°‡πà‡πÉ‡∏´‡πâ‡∏û‡∏π‡∏î‡∏ã‡πâ‡∏≥
                } else if (currentCount >= 1) { 
                    // ‡∏°‡∏µ‡∏Ñ‡∏ô‡∏≠‡∏¢‡∏π‡πà ‡πÅ‡∏ï‡πà‡∏û‡∏π‡∏î‡∏à‡∏ö‡πÅ‡∏•‡πâ‡∏ß ‡πÉ‡∏´‡πâ‡∏Ñ‡∏á UI ‡πÑ‡∏ß‡πâ‡∏£‡∏≠‡∏ñ‡∏≤‡∏°‡∏ï‡πà‡∏≠
                    if (isIntroVisible) {
                        if (botText) botText.textContent = "‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏ä‡πà‡∏ß‡∏¢‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡∏Ñ‡∏£‡∏±‡∏ö/‡∏ñ‡∏≤‡∏°‡∏ï‡πà‡∏≠‡πÑ‡∏î‡πâ‡πÄ‡∏•‡∏¢";
                        stopMouthAnim();
                    } else {
                        // ‡∏Å‡∏£‡∏ì‡∏µ Polling ‡∏û‡∏•‡∏≤‡∏î‡πÑ‡∏õ‡∏ï‡∏≠‡∏ô‡∏û‡∏π‡∏î ‡πÉ‡∏´‡πâ‡πÅ‡∏™‡∏î‡∏á UI ‡∏Ñ‡πâ‡∏≤‡∏á‡πÑ‡∏ß‡πâ
                        showIntroUI();
                        if (botText) botText.textContent = "‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏ä‡πà‡∏ß‡∏¢‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡∏Ñ‡∏£‡∏±‡∏ö/‡∏ñ‡∏≤‡∏°‡∏ï‡πà‡∏≠‡πÑ‡∏î‡πâ‡πÄ‡∏•‡∏¢";
                        stopMouthAnim();
                    }
                }
            } else {
                // ‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ñ‡∏ô‡∏≠‡∏¢‡∏π‡πà (isPresence: false ‡∏´‡∏£‡∏∑‡∏≠ count: 0)
                if (isIntroVisible && !isVoiceBotActive) { 
                    console.log("Presence lost. Hiding UI.");
                    hideIntroUI();
                }
                lastServerCount = 0; // ‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏Å‡∏≤‡∏£‡∏û‡∏π‡∏î‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏Ñ‡∏ô‡∏≠‡∏≠‡∏Å‡πÑ‡∏õ‡πÅ‡∏•‡πâ‡∏ß
            }

         
            
        } catch (err) {
            console.error("Error polling bot status:", err);
            if (statusText) statusText.textContent = "‚ùå Error Polling: " + err.message;
        }
        
        // Polling ‡∏ã‡πâ‡∏≥
        if (!isBotVoicePlaying) {
             currentPollingTimeout = setTimeout(checkBotStatus, CHECK_INTERVAL_MS);
        }
    }


    // ---------- 5. Initialize (‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô) ----------
    
    function tryUnlockAudioOnGesture() {
      if (audioUnlocked) return;
      const tempAudio = new Audio(BOT_AUDIO_PATH);
      tempAudio.play().then(() => {
        tempAudio.pause();
        tempAudio.currentTime = 0;
        audioUnlocked = true;
        console.log("üîì Audio unlocked by user gesture.");
      }).catch(err => {
        audioUnlocked = true; 
        console.warn("‚ö†Ô∏è Audio unlock attempt rejected:", err);
      });
    }
    
    // 1. ‡∏´‡∏≤ Elements ‡∏Ç‡∏≠‡∏á Bot ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î
    botIntro = safeGet("botIntro"); 
    botText = safeGet("botText");
    listenButton = safeGet("listenButton");
    statusText = safeGet("statusText");
    stopBotBtn = safeGet("stopBotBtn"); 
    
    // 2. ‡∏õ‡∏•‡∏î‡∏•‡πá‡∏≠‡∏Ñ‡πÄ‡∏™‡∏µ‡∏¢‡∏á
    ["click", "touchstart", "keydown"].forEach(evt => {
      document.addEventListener(evt, tryUnlockAudioOnGesture, { once: true, passive: true });
    });
    
    // 3. ü§ñ ‡πÄ‡∏£‡∏¥‡πà‡∏° "‡∏ö‡∏≠‡∏ó Sensor Polling"
    checkBotStatus(); 
    
    // 4. ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ "‡∏ö‡∏≠‡∏ó‡πÄ‡∏™‡∏µ‡∏¢‡∏á" (SpeechRecognition)
    if (!SpeechRecognition) {
      if (statusText) statusText.textContent = "‡∏ö‡∏£‡∏≤‡∏ß‡πÄ‡∏ã‡∏≠‡∏£‡πå‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡πÑ‡∏°‡πà‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏û‡∏π‡∏î";
    } else {
      recognition = new SpeechRecognition();
      recognition.lang = "th-TH";
      recognition.interimResults = false;
      recognition.maxAlternatives = 1;
    
      recognition.addEventListener("result", (ev) => {
        try {
          const transcript = ev.results[0][0].transcript;
          if (statusText) statusText.textContent = `‡∏Ñ‡∏∏‡∏ì‡∏û‡∏π‡∏î‡∏ß‡πà‡∏≤: "${transcript}"`;
          getOllamaResponse(transcript); 
        } catch (e) { console.error("Recognition result error:", e); }
      });
      
      recognition.addEventListener("speechend", () => {
        try { recognition.stop(); } catch (e) {}
      });
      
      recognition.addEventListener("error", (ev) => {
        const errorMsg = ev.error === "no-speech" ? "‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡∏¢‡∏¥‡∏ô‡πÄ‡∏™‡∏µ‡∏¢‡∏á... ‡∏•‡∏≠‡∏á‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á" : "‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î: " + ev.error;
        cancelVoiceBot(false); 
        if (botText) botText.textContent = errorMsg; 
        if (statusText) statusText.textContent = errorMsg;
      });
    }
    
    // 5. üéôÔ∏è Event ‡∏õ‡∏∏‡πà‡∏°‡πÑ‡∏°‡πÇ‡∏Ñ‡∏£‡πÇ‡∏ü‡∏ô
    if (listenButton) {
      listenButton.addEventListener("click", (e) => {
        e.stopPropagation(); 
        tryUnlockAudioOnGesture(); 
        
        if (isBotVoicePlaying) { isBotVoicePlaying = false; }
        clearTimeout(currentPollingTimeout); // ‡∏´‡∏¢‡∏∏‡∏î Polling ‡∏ä‡∏±‡πà‡∏ß‡∏Ñ‡∏£‡∏≤‡∏ß
        
        isVoiceBotActive = true; 
        lastServerCount = 1; // ‡∏ï‡∏±‡πâ‡∏á‡πÄ‡∏õ‡πá‡∏ô 1 ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡∏û‡∏π‡∏î‡∏ï‡πâ‡∏≠‡∏ô‡∏£‡∏±‡∏ö‡∏ã‡πâ‡∏≥
        try { synth.cancel(); } catch (e) {}
    
        if (!recognition) {
          if (statusText) statusText.textContent = "‡∏ö‡∏£‡∏≤‡∏ß‡πÄ‡∏ã‡∏≠‡∏£‡πå‡πÑ‡∏°‡πà‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏ü‡∏±‡∏á‡∏î‡πâ‡∏ß‡∏¢‡πÄ‡∏™‡∏µ‡∏¢‡∏á";
          return;
        }
    
        showIntroUI();
        startMouthAnim('listen'); 
        if (statusText) statusText.textContent = "‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏ü‡∏±‡∏á... üéôÔ∏è";
        if (botText) botText.textContent = "‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏ü‡∏±‡∏á";
        if (listenButton) { listenButton.disabled = true; }
    
        try {
          recognition.start();
        } catch (err) {
          console.error("recognition.start error:", err);
          cancelVoiceBot(false); 
        }
      });
    }

    // 6. ‚úñÔ∏è Event ‡∏õ‡∏∏‡πà‡∏°‡∏´‡∏¢‡∏∏‡∏î (X)
    if (stopBotBtn) {
        stopBotBtn.addEventListener("click", (e) => {
            e.stopPropagation(); 
            if (isBotVoicePlaying) { isBotVoicePlaying = false; }
            cancelVoiceBot(true); // ‡∏ã‡πà‡∏≠‡∏ô UI
        });
    }
    
    console.log("‚úÖ Bot Frontend (v12.4 - Single Play Logic) Initialized");

});
</script>
</body>
</html>
